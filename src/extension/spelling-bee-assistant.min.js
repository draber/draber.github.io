!function(){"use strict";const t=function({tag:t,text:e="",attributes:s={},style:a={},data:i={},events:r={},classNames:o=[],svg:n}={}){const d=n?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);d.textContent=e;for(let[t,e]of Object.entries(s))n?d.setAttributeNS(null,t,e.toString()):!1!==e&&(d[t]=e.toString());for(let[t,e]of Object.entries(i))e=e.toString(),d.dataset[t]=e;for(const[t,e]of Object.entries(r))d.addEventListener(t,e,!1);return Object.assign(d.style,a),o.length&&d.classList.add(...o),d},e=new Proxy({$:(t,e=null)=>"string"==typeof t?(e||document).querySelector(t):t||null,$$:(t,e=null)=>[].slice.call((e||document).querySelectorAll(t))},{get:(e,s)=>function(){const a=Array.prototype.slice.call(arguments);return Object.prototype.hasOwnProperty.call(e,s)&&"function"==typeof e[s]?(e[s].bind(e),e[s].apply(null,a)):t({tag:s,...a.shift()})}});var s="sba";const a={version:"3.0.0",label:"Spelling Bee Assistant",title:"Assistant",url:"https://spelling-bee-assistant.app/",prefix:s,repo:"draber/draber.github.io.git",targetUrl:"https://www.nytimes.com/puzzles/spelling-bee",options:JSON.parse(localStorage.getItem("sba-settings")||"{}")};var i=t=>{let e=Object.create(a);for(let s of t.split(".")){if(void 0===e[s])return;e=e[s]}return e},r=(t,e)=>{const s=t.split("."),i=s.pop();let r=a;for(let t of s){if(r[t]||(r[t]={}),"[object Object]"!==Object.prototype.toString.call(r))return console.error(`${t} is not of the type Object`),!1;r=r[t]}r[i]=e,localStorage.setItem("sba-settings",JSON.stringify(a.options))};const o=i("prefix"),n=t=>t.replace(/[_-]+/," ").replace(/(?:^[\w]|[A-Z]|\b\w|\s+)/g,(function(t,e){return 0==+t?"":0===e?t.toLowerCase():t.toUpperCase()})),d=(t,e="c")=>{switch(e){case"c":return n(o+"_"+t);case"d":return(t=>t.replace(/[\W_]+/g," ").split(/ |\B(?=[A-Z])/).map((t=>t.toLowerCase())).join("-"))(o+t.charAt(0).toUpperCase()+t.slice(1));default:return o+t}};let l;const h=window.gameData.today;let p;const c=()=>{l.foundPangrams=l.foundTerms.filter((t=>l.pangrams.includes(t))),l.remainders=l.answers.filter((t=>!l.foundTerms.includes(t))),p.trigger(d("wordsUpdated"))};var g=(t,e)=>{p=t,(t=>{l={answers:h.answers,pangrams:h.pangrams,foundTerms:t},c()})(e),p.on(d("newWord"),(t=>{var e;e=t.detail,l.foundTerms.push(e),c()}))},u=t=>l[t],b=t=>l[t].length,m=t=>{const e=l[t];let s=0;return e.forEach((t=>{l.pangrams.includes(t)?s+=t.length+7:t.length>4?s+=t.length:s+=1})),s},f=()=>h.id,x=()=>h.centerLetter;const v={options:{children:{path:"M16 14c0-2.203-1.797-4-4-4s-4 1.797-4 4 1.797 4 4 4 4-1.797 4-4zm8-1.703v3.469c0 .234-.187.516-.438.562l-2.891.438a8.86 8.86 0 01-.609 1.422c.531.766 1.094 1.453 1.672 2.156.094.109.156.25.156.391s-.047.25-.141.359c-.375.5-2.484 2.797-3.016 2.797a.795.795 0 01-.406-.141l-2.156-1.687a9.449 9.449 0 01-1.422.594c-.109.953-.203 1.969-.453 2.906a.573.573 0 01-.562.438h-3.469c-.281 0-.531-.203-.562-.469l-.438-2.875a9.194 9.194 0 01-1.406-.578l-2.203 1.672c-.109.094-.25.141-.391.141s-.281-.063-.391-.172c-.828-.75-1.922-1.719-2.578-2.625a.607.607 0 01.016-.718c.531-.719 1.109-1.406 1.641-2.141a8.324 8.324 0 01-.641-1.547l-2.859-.422A.57.57 0 010 15.705v-3.469c0-.234.187-.516.422-.562l2.906-.438c.156-.5.359-.969.609-1.437a37.64 37.64 0 00-1.672-2.156c-.094-.109-.156-.234-.156-.375s.063-.25.141-.359c.375-.516 2.484-2.797 3.016-2.797.141 0 .281.063.406.156L7.828 5.94a9.449 9.449 0 011.422-.594c.109-.953.203-1.969.453-2.906a.573.573 0 01.562-.438h3.469c.281 0 .531.203.562.469l.438 2.875c.484.156.953.344 1.406.578l2.219-1.672c.094-.094.234-.141.375-.141s.281.063.391.156c.828.766 1.922 1.734 2.578 2.656a.534.534 0 01.109.344c0 .141-.047.25-.125.359-.531.719-1.109 1.406-1.641 2.141.266.5.484 1.016.641 1.531l2.859.438a.57.57 0 01.453.562z"},width:24,height:28},arrowDown:{children:{path:"M16.797 11.5a.54.54 0 01-.156.359L9.36 19.14c-.094.094-.234.156-.359.156s-.266-.063-.359-.156l-7.281-7.281c-.094-.094-.156-.234-.156-.359s.063-.266.156-.359l.781-.781a.508.508 0 01.359-.156.54.54 0 01.359.156l6.141 6.141 6.141-6.141c.094-.094.234-.156.359-.156s.266.063.359.156l.781.781a.536.536 0 01.156.359z"},width:18,height:28},darkMode:{children:{path:"M12.018 1.982A12.018 12.018 0 000 14a12.018 12.018 0 0012.018 12.018A12.018 12.018 0 0024.036 14 12.018 12.018 0 0012.018 1.982zm0 3.293A8.725 8.725 0 0120.743 14a8.725 8.725 0 01-8.725 8.725z"},width:24,height:28}};class w{getState(){const t=i(`options.${this.key}`);return void 0!==t?t:this.defaultState}toggle(t){return this.canChangeState?(r(`options.${this.key}`,t),this.hasUi()&&this.ui.classList.toggle("inactive",!t),this):this}enableTool(t,s,a){return this.tool=e.div({events:{click:()=>{this.toggle(!this.getState()),this.tool.title=this.getState()?a:s}},attributes:{title:this.getState()?a:s},data:{tool:this.key}}),this.tool.append((t=>{if(!v[t])return console.error(`Icon ${t} doesn't exist`),!1;const s=v[t],a=e.svg({attributes:{viewBox:`0 0 ${s.width} ${s.height}`},svg:!0});for(const[t,i]of Object.entries(s.children))a.append(e[t]({attributes:{d:i},svg:!0}));return a})(t)),this}hasUi(){return this.ui instanceof HTMLElement}on(t,e){return this.ui.addEventListener(t,e),this}trigger(t,e){return this.ui.dispatchEvent(e?new CustomEvent(t,{detail:e}):new Event(t)),this}constructor(t,{key:e,canChangeState:s,defaultState:a}={}){if(!t)throw new TypeError(`Missing 'title' from ${this.constructor.name}`);this.title=t,this.key=e||n(t),this.canChangeState=void 0!==s&&s,this.defaultState=void 0===a||a,this.ui}}class y extends w{attach(){return this.toggle(this.getState()),this.hasUi()?(this.ui.dataset.ui=this.key,(this.target||this.app.ui).append(this.ui),this):this}add(){return this.canChangeState&&r(`options.${this.key}`,this.getState()),this.attach()}constructor(t,e,{key:s,canChangeState:a,defaultState:i}={}){super(e,{key:s,canChangeState:a,defaultState:i}),this.target,this.app=t}}var k=(t,s)=>{s.innerHTML="";const a=e.tbody();return t.forEach((t=>{const s=e.tr();t.forEach((t=>{s.append(e.td({text:t}))})),a.append(s)})),s.append(a),s};class S extends y{toggleDecoration(t){return e.$$("tr",t.ui).forEach(((s,a)=>{const i=Array.from(e.$$("td",s)).map((t=>/^\d+$/.test(t.textContent)?parseInt(t.textContent):t.textContent));console.log(t.key,i,t.cssMarkers[this.marker](i,a)),t.cssMarkers[this.marker](i,a)&&s.classList.toggle(d(this.marker,"d"),this.getState())})),this}toggle(t){return super.toggle(t),this.plugins.forEach((t=>{this.toggleDecoration(t)})),this}constructor(t,e,{canChangeState:s,marker:a}={}){super(t,e,{canChangeState:s}),this.plugins=new Set,this.marker=a,t.on(d("paneUpdated"),(t=>{if(!(t.detail&&t.detail.plugin&&t.detail.plugin.cssMarkers&&t.detail.plugin.cssMarkers[this.marker]))return!1;this.plugins.has(t.detail.plugin)||this.plugins.add(t.detail.plugin),this.toggleDecoration(t.detail.plugin)})),this.add()}}var C={Styles:class extends y{constructor(t){super(t,"Styles"),this.target=e.$("head"),this.ui=e.style({text:'[data-sba-theme=light]{--sba0:#000;--sba1:#fff;--sba2:rgba(255,255,255,.85);--sba3:#dcdcdc;--sba4:#e6e6e6;--sba5:#dcdcdc;}[data-sba-theme=dark]{--sba0:#e7eae1;--sba1:#111;--sba2:rgba(17,17,17,.85);--sba3:#333;--sba4:#393939;--sba5:#666;}html{--sba6: rgb(248, 205, 5);}.pz-game-field{background:inherit;color:inherit}.sb-wordlist-items .sba-pangram{border-bottom:2px var(--sba6) solid}.sb-wordlist-items .sb-anagram a{color:var(--sba5)}.sb-modal-scrim{z-index:6}[data-sba-theme=dark]{background:var(--sba1);color:var(--sba0)}[data-sba-theme=dark] .pz-nav__hamburger-inner,[data-sba-theme=dark] .pz-nav__hamburger-inner::before,[data-sba-theme=dark] .pz-nav__hamburger-inner::after{background-color:var(--sba0)}[data-sba-theme=dark] .pz-nav{width:100%;background:var(--sba1)}[data-sba-theme=dark] .pz-nav__logo{filter:invert(1)}[data-sba-theme=dark] .sb-modal-scrim{background:var(--sba2);color:var(--sba0)}[data-sba-theme=dark] .pz-modal__title{color:var(--sba0)}[data-sba-theme=dark] .sb-modal-frame,[data-sba-theme=dark] .pz-modal__button.white{background:var(--sba1);color:var(--sba0)}[data-sba-theme=dark] .pz-modal__button.white:hover{background:var(--sba4)}[data-sba-theme=dark] .sb-message{background:var(--sba4)}[data-sba-theme=dark] .sb-input-invalid{color:var(--sba5)}[data-sba-theme=dark] .sb-toggle-expand{box-shadow:none}[data-sba-theme=dark] .sb-progress-marker .sb-progress-value,[data-sba-theme=dark] .hive-cell.center .cell-fill{background:var(--sba6);fill:var(--sba6);color:var(--sba1)}[data-sba-theme=dark] .sb-input-bright{color:var(--sba6)}[data-sba-theme=dark] .hive-cell.outer .cell-fill{fill:var(--sba4)}[data-sba-theme=dark] .cell-fill{stroke:var(--sba1)}[data-sba-theme=dark] .cell-letter{fill:var(--sba0)}[data-sba-theme=dark] .hive-cell.center .cell-letter{fill:var(--sba1)}[data-sba-theme=dark] .hive-action:not(.hive-action__shuffle){background:var(--sba1);color:var(--sba0)}[data-sba-theme=dark] .hive-action__shuffle{filter:invert(100%)}[data-sba-theme=dark] *:not(.hive-action__shuffle):not(.sba-pangram):not(.sba-preeminent){border-color:var(--sba3) !important}.sba{position:absolute;z-index:3;width:160px;box-sizing:border-box;padding:0 10px 5px;background:var(--sba1);border-width:1px;border-color:var(--sba3);border-radius:6px;border-style:solid}.sba *,.sba *:before,.sba *:after{box-sizing:border-box}.sba *:focus{outline:0}.sba [data-ui=header]{display:flex;gap:8px}.sba [data-ui=header] .toolbar{display:flex;align-items:stretch;gap:1px}.sba [data-ui=header] .toolbar div{padding:10px 3px 2px 3px}.sba [data-ui=header] .toolbar div:last-of-type{padding-top:8px}.sba [data-ui=header] svg{width:11px;cursor:pointer;fill:currentColor}.sba .header{font-weight:bold;line-height:32px;flex-grow:2}.sba .minimizer{transform:rotate(180deg);transform-origin:center;position:relative;top:2px}.sba.inactive details,.sba.inactive progress,.sba.inactive [data-ui=footer]{display:none}.sba.inactive [data-tool=setUp]{position:relative;pointer-events:none}.sba.inactive [data-tool=setUp]:before{content:"";width:100%;height:100%;background-color:var(--sba2);cursor:default;display:block;position:absolute;top:0;left:0}.sba.inactive .minimizer{transform:rotate(0deg);top:0}.sba progress{-webkit-appearance:none;appearance:none;width:100%;border-radius:0;margin:0 0 2px 0;height:6px;padding:0;border:1px var(--sba3) solid;background:transparent;display:block}.sba progress.inactive{display:none}.sba progress::-webkit-progress-bar{background-color:transparent}.sba progress::-webkit-progress-value{background-color:var(--sba6);height:4px}.sba progress::-moz-progress-bar{background-color:var(--sba6)}.sba details{font-size:90%;max-height:800px;transition:max-height .25s ease-in;margin-bottom:1px}.sba details[open] summary:before{transform:rotate(-90deg);left:10px;top:1px}.sba details.inactive{height:0;max-height:0;transition:max-height .25s ease-out;overflow:hidden;margin:0}.sba summary{font-size:13px;line-height:20px;padding:1px 15px 0 21px;background:var(--sba4);color:var(--sba0);cursor:pointer;list-style:none;position:relative;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sba summary::marker{display:none}.sba summary:before{content:"â¯";font-size:9px;position:absolute;display:inline-block;transform:rotate(90deg);transform-origin:center;left:7px;top:0}.sba .pane{border:1px solid var(--sba3);border-top:none;width:100%;font-size:85%;margin-bottom:2px}.sba table{border-collapse:collapse;table-layout:fixed}.sba tr.sba-preeminent{font-weight:bold;border-bottom:2px solid var(--sba6) !important}.sba tr.sba-completed{opacity:.65}.sba td{border:1px solid var(--sba3);border-top:none;white-space:nowrap;text-align:center;padding:3px 0;width:26px}.sba td:first-of-type{text-align:left;width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:3px 3px}.sba [data-ui=scoreSoFar] tbody tr:first-child td,.sba [data-ui=spoilers] tbody tr:first-child td,.sba [data-ui=startingWithâ€¦] tbody tr:first-child td{font-weight:bold;font-size:92%}.sba [data-ui=startingWithâ€¦] tbody tr td:first-child{text-align:center;text-transform:uppercase}.sba [data-ui=footer]{color:currentColor;opacity:.6;font-size:10px;text-align:right;display:block;padding-top:8px}.sba [data-ui=footer]:hover{opacity:.8;text-decoration:underline}.sba .spill-title{padding:8px 6px 0;text-align:center}.sba .spill{text-align:center;padding:14px 0;font-size:280%}.sba ul.pane{padding:5px}.sba [data-ui=surrender] .pane{padding:10px 5px}.sba [data-ui=surrender] button{margin:0 auto;display:block;font-size:100%;white-space:nowrap;padding:12px 10px}.sba label{cursor:pointer;position:relative;line-height:19px;white-space:nowrap}.sba label input{position:relative;top:2px;margin:0 5px 0 0}@media(min-width: 768px){.sbaContainer{width:100%;max-width:1080px;margin:0 auto;height:0;overflow-y:visible;position:relative;z-index:5}.sba{left:100%;top:64px}}@media(max-width: 1444px){.sbaContainer{max-width:none}.sba{top:16px;left:12px}}@media(max-width: 767.98px){.sba{top:167px}.pz-mobile .sba{top:auto;bottom:-7px}}'}),t.on(d("destroy"),(()=>this.ui.remove())),this.add()}},DarkMode:class extends y{toggle(t){return super.toggle(t),document.body.dataset[d("theme")]=t?"dark":"light",this}constructor(t){super(t,"Dark Mode",{canChangeState:!0,defaultState:!1}),this.enableTool("darkMode","Dark mode on","Dark mode off"),t.on(d("destroy"),(()=>{delete document.body.dataset[d("theme")]})),this.add()}},Header:class extends y{constructor(t){super(t,i("title"),{key:"header"}),this.ui=e.div(),t.dragHandle=e.div({text:this.title,classNames:["header"]}),this.ui.append(t.dragHandle),t.on(d("toolsReady"),(t=>{const s=e.div({classNames:["toolbar"]});return t.detail.forEach((t=>{s.append(t)})),this.ui.append(s),this})),this.add()}},SetUp:class extends y{toggle(t){return super.toggle(t),this.ui.open=this.getState(),this}constructor(t){super(t,"Set-up",{canChangeState:!0,defaultState:!1});const s=e.ul({classNames:["pane"]});this.ui=e.details({events:{click:e=>{"INPUT"===e.target.tagName&&t.registry.get(e.target.name).toggle(e.target.checked)},toggle:t=>{t.target.open||this.toggle(!1)}}}),this.enableTool("options","Show set-up","Hide set-up"),t.on(d("pluginsReady"),(t=>{t.detail.forEach(((t,a)=>{if(!t.canChangeState||t.tool)return!1;const i=e.li(),r=e.label({text:t.title}),o=e.input({attributes:{type:"checkbox",name:a,checked:t.getState()}});r.prepend(o),i.append(r),s.append(i)}))})),this.ui.append(e.summary({text:this.title}),s),this.toggle(!1),this.add()}},ProgressBar:class extends y{refresh(){let t=100*m("foundTerms")/m("answers");t=Math.min(Number(Math.round(t+"e2")+"e-2"),100),this.ui.value=t,this.ui.textContent=t+"%",this.ui.title=`Progress: ${t}%`}constructor(t){super(t,"Progress Bar",{canChangeState:!0}),this.ui=e.progress({attributes:{max:100}}),t.on(d("wordsUpdated"),(()=>{this.refresh()})),this.refresh(),this.add()}},ScoreSoFar:class extends y{getData(){return[["","âœ“","?","âˆ‘"],["Words",b("foundTerms"),b("remainders"),b("answers")],["Points",m("foundTerms"),m("remainders"),m("answers")]]}constructor(t){super(t,"Score so far",{canChangeState:!0}),this.ui=e.details({attributes:{open:!0}});const s=e.table({classNames:["pane"]});this.ui.append(e.summary({text:this.title}),s),t.on(d("wordsUpdated"),(()=>{k(this.getData(),s)})),this.add()}},Spoilers:class extends y{getData(){const t={},e=b("pangrams"),s=b("foundPangrams"),a=[["","âœ“","?","âˆ‘"]];u("answers").forEach((e=>{t[e.length]=t[e.length]||{found:0,missing:0,total:0},u("foundTerms").includes(e)?t[e.length].found++:t[e.length].missing++,t[e.length].total++}));let i=Object.keys(t);return i.sort(((t,e)=>t-e)),i.forEach((e=>{a.push([e+" "+(e>1?"letters":"letter"),t[e].found,t[e].missing,t[e].total])})),a.push(["Pangrams",s,e-s,e]),a}constructor(t){super(t,"Spoilers",{canChangeState:!0}),this.ui=e.details(),this.cssMarkers={completed:(t,e)=>e>0&&0===t[2],preeminent:(t,e)=>e>0&&"Pangrams"===t[0]};const s=e.table({classNames:["pane"]});this.ui.append(e.summary({text:this.title}),s),t.on(d("wordsUpdated"),(()=>{k(this.getData(),s),t.trigger(d("paneUpdated"),{plugin:this})})),this.add()}},StartingWith:class extends y{getData(){const t={},e=u("answers").sort(((t,e)=>t.startsWith(this.centerLetter)?-1:e.startsWith(this.centerLetter)?1:t<e?-1:1)),s=u("remainders"),a={foundTerms:0,remainders:0,total:0};e.forEach((e=>{const i=e.charAt(0);void 0===t[i]&&(t[i]={...a}),s.includes(e)?t[i].remainders++:t[i].foundTerms++,t[i].total++}));const i=[["","âœ“","?","âˆ‘"]];for(let[e,s]of Object.entries(t))s=Object.values(s),s.unshift(e),i.push(s);return i}constructor(t){super(t,"Starting withâ€¦",{canChangeState:!0}),this.ui=e.details(),this.cssMarkers={completed:(t,e)=>e>0&&0===t[2],preeminent:(t,e)=>e>0&&t[0]===x()};const s=e.table({classNames:["pane"]});this.ui.append(e.summary({text:this.title}),s),t.on(d("wordsUpdated"),(()=>{k(this.getData(),s),t.trigger(d("paneUpdated"),{plugin:this})})),this.add()}},SpillTheBeans:class extends y{react(t){return t?u("remainders").filter((e=>e.startsWith(t))).length?"ðŸ™‚":"ðŸ™":"ðŸ˜"}constructor(t){super(t,"Spill the beans",{canChangeState:!0}),this.ui=e.details();const s=e.div({classNames:["pane"]});s.append(e.div({text:"Watch my reaction!",classNames:["spill-title"]}));const a=e.div({text:"ðŸ˜",classNames:["spill"]});s.append(a),this.ui.append(e.summary({text:this.title}),s),new MutationObserver((t=>{a.textContent=this.react(t.pop().target.textContent.trim())})).observe(e.$(".sb-hive-input-content",t.game),{childList:!0}),this.add()}},StepsToSuccess:class extends y{getData(){const t=m("answers");return[["Beginner",0],["Good Start",2],["Moving Up",5],["Good",8],["Solid",15],["Nice",25],["Great",40],["Amazing",50],["Genius",70],["Queen Bee",100]].map((e=>[e[0],Math.round(e[1]/100*t)]))}getCurrentTier(){return this.getData().filter((t=>t[1]<=m("foundTerms"))).pop()[1]}constructor(t){super(t,"Steps to success",{canChangeState:!0}),this.ui=e.details(),this.cssMarkers={completed:t=>t[1]<m("foundTerms")&&t[1]!==this.getCurrentTier(),preeminent:t=>t[1]===this.getCurrentTier()};const s=e.table({classNames:["pane"]});this.ui.append(e.summary({text:this.title}),s),t.on(d("wordsUpdated"),(()=>{k(this.getData(),s),t.trigger(d("paneUpdated"),{plugin:this})})),this.add()}},Surrender:class extends y{buildEntry(t){const s=e.li({classNames:u("pangrams").includes(t)?["sb-anagram",d("pangram")]:["sb-anagram"]});return s.append(e.a({text:t,attributes:{href:`https://www.google.com/search?q=${t}`,target:"_blank"}})),s}resolve(t){return!this.usedOnce&&(this.app.observer.disconnect(),u("remainders").forEach((e=>t.append(this.buildEntry(e)))),this.usedOnce=!0,this.app.trigger(d("wordsUpdated")),!0)}constructor(t){super(t,"Surrender",{canChangeState:!0}),this.usedOnce=!1,this.ui=e.details();const s=e.div({classNames:["pane"]});s.append(e.button({tag:"button",classNames:["hive-action"],text:"Display answers",attributes:{type:"button"},events:{click:()=>this.resolve(e.$(".sb-wordlist-items",t.game))}})),this.ui.append(e.summary({text:this.title}),s),this.add()}},TrMarkCompleted:class extends S{constructor(t){super(t,"Grey out completed",{canChangeState:!0,marker:"completed"}),this.add()}},TrMarkPreeminent:class extends S{constructor(t){super(t,"Highlight preeminent",{canChangeState:!0,marker:"preeminent"}),this.add()}},HighlightPangrams:class extends y{toggle(t){return super.toggle(t),this.handleDecoration(),this}handleDecoration(){const t=u("pangrams");return e.$$("li",this.app.resultList).forEach((e=>{const s=e.textContent;t.includes(s)&&e.classList.toggle(d("pangram","d"),this.getState())})),this}constructor(t){super(t,"Highlight pangrams",{canChangeState:!0}),t.on(d("wordsUpdated"),(()=>{this.handleDecoration()})),this.handleDecoration(),this.add()}},Footer:class extends y{constructor(t){super(t,`${i("label")}`,{key:"footer"}),this.ui=e.a({text:this.title,attributes:{href:i("url"),target:"_blank"}}),this.add()}},Positioning:class extends y{getOffset(t){return isNaN(t)?{top:0,right:0,bottom:0,left:0,...t}:{top:t,right:t,bottom:t,left:t}}getBoundaries(){const t=this.app.dragArea.getBoundingClientRect(),e=this.app.ui.parentNode.getBoundingClientRect(),s=this.app.ui.getBoundingClientRect();return{minTop:this.offset.top,maxTop:t.height-s.height-this.offset.bottom,minLeft:this.offset.left-e.left,maxLeft:t.width-e.left-s.width-this.offset.right}}getMouse(t){return{left:t.screenX,top:t.screenY}}getPosition(t){if(t){const e=this.getMouse(t);return{left:this.position.left+e.left-this.mouse.left,top:this.position.top+=e.top-this.mouse.top}}{const t=getComputedStyle(this.app.ui);return{top:parseInt(t.top),left:parseInt(t.left)}}}reposition(){return this.boundaries=this.getBoundaries(),this.position.left=Math.min(this.boundaries.maxLeft,Math.max(this.boundaries.minLeft,this.position.left)),this.position.top=Math.min(this.boundaries.maxTop,Math.max(this.boundaries.minTop,this.position.top)),Object.assign(this.app.ui.style,{left:this.position.left+"px",top:this.position.top+"px"}),this.toggle(!!this.getState()&&this.position),this}enableDrag(){return this.app.dragHandle.style.cursor="move",this.app.on("pointerdown",(t=>{this.isLastTarget=t.target.isSameNode(this.app.dragHandle)})).on("pointerup",(()=>{this.isLastTarget=!1})).on("dragend",(t=>{this.position=this.getPosition(t),this.reposition(),t.target.style.opacity="1"})).on("dragstart",(t=>{if(!this.isLastTarget)return t.preventDefault(),!1;t.target.style.opacity=".2",this.position=this.getPosition(),this.mouse=this.getMouse(t)})).on("dragover",(t=>t.preventDefault())),this.app.dragArea.addEventListener("dragover",(t=>t.preventDefault())),this}toggle(t){return super.toggle(t?this.position:t)}constructor(t){if(super(t,"Memorize position",{key:"positioning",canChangeState:!0}),this.boundaries,this.mouse,this.isLastTarget=!1,!this.app.isDraggable)return this;this.position=this.getPosition(),this.offset=this.getOffset(t.dragOffset||0);const e=this.getState();e&&"[object Object]"===Object.prototype.toString.call(e)&&(this.position=e,this.reposition()),this.enableDrag(),this.add(),window.addEventListener("orientationchange",(()=>this.reposition()))}}};const z=new class extends w{getSyncData(){let t=localStorage.getItem("sb-today");return!!t&&(t=JSON.parse(t),!(!t.id||t.id!==f())&&(t.words||[]))}async getResults(){const t=Array.from(e.$$("li",this.resultList)).map((t=>t.textContent.trim()));let s,a=5;return await new Promise((e=>{const i=setInterval((()=>{s=this.getSyncData(),!s&&a||(e(s||t),clearInterval(i)),a--}),300)}))}registerPlugins(t){for(const[e,s]of Object.entries(t))this.registry.set(e,new s(this));return this.trigger(d("pluginsReady"),this.registry),this.registerTools()}registerTools(){return this.registry.forEach((t=>{t.tool&&this.toolButtons.set(t.key,t.tool)})),this.enableTool("arrowDown","Maximize assistant","Minimize assistant"),this.tool.classList.add("minimizer"),this.toolButtons.set(this.key,this.tool),this.trigger(d("toolsReady"),this.toolButtons)}constructor(t){super(i("label"),{canChangeState:!0,key:d("app")}),this.game=t;const s=e.$(`[data-id="${this.key}"]`);s&&s.dispatchEvent(new Event(d("destroy"))),this.registry=new Map,this.toolButtons=new Map,this.parent=e.div({classNames:[d("container")]}),this.resultList=e.$(".sb-wordlist-items",t);const a={};a[d("destroy")]=()=>{this.observer.disconnect(),this.parent.remove()},this.isDraggable=document.body.classList.contains("pz-desktop"),this.ui=e.div({attributes:{draggable:this.isDraggable},data:{id:this.key,version:i("version")},classNames:[i("prefix")],events:a}),this.dragHandle=this.ui,this.dragArea=this.game,this.dragOffset=12,this.observer=(()=>{const t=new MutationObserver((t=>this.trigger(d("newWord"),t.pop().addedNodes[0].textContent.trim())));return t.observe(this.resultList,{childList:!0}),t})();const r=window.matchMedia("(max-width: 1196px)");r.addEventListener("change",(t=>this.toggle(!t.currentTarget.matches))),r.dispatchEvent(new Event("change"));const o=e.$(".sb-toggle-expand");o.addEventListener("click",(()=>{this.ui.style.display=e.$(".sb-toggle-icon-expanded",o)?"none":"block"})),e.$(".sb-toggle-icon-expanded",o)&&o.dispatchEvent(new Event("click")),this.toggle(this.getState()),this.parent.append(this.ui),t.before(this.parent)}}(e.$("#pz-game-root"));z.getResults().then((t=>{g(z,t),z.registerPlugins(C),z.trigger(d("wordsUpdated"))}))}();