!function(){"use strict";const t={$:(t,e=null)=>"string"==typeof t?(e||document).querySelector(t):t||null,$$:(t,e=null)=>[].slice.call((e||document).querySelectorAll(t)),htmlToNode:t=>{if(t instanceof Element)return t;if(("string"==typeof t||t instanceof String)&&t.trim().startsWith("<")&&t.trim().endsWith(">")){const e=a.div();e.innerHTML=t,t=e.childNodes}if(t instanceof NodeList||Array.isArray(t)){const e=document.createDocumentFragment();return t.forEach((t=>{e.append(t)})),e}console.error("Expected Element|NodeList|Array|String, got ",t)}},e=function({tag:e,text:a="",attributes:s={},style:i={},data:r={},events:o={},classNames:n=[],svg:l,html:d}={}){const p=l?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);"a"===e&&s.href&&!a&&(a=new URL(s.href).hostname),p.textContent=a;for(let[t,e]of Object.entries(s))l?p.setAttributeNS(null,t,e.toString()):"role"===t||t.startsWith("aria-")?p.setAttribute(t,e):!1!==e&&(p[t]=e.toString());for(let[t,e]of Object.entries(r))e=e.toString(),p.dataset[t]=e;for(const[t,e]of Object.entries(o))p.addEventListener(t,e,!1);return Object.assign(p.style,i),n.length&&p.classList.add(...n),d&&p.append(t.htmlToNode(d)),p},a=new Proxy(t,{get:(t,a)=>function(){const s=Array.prototype.slice.call(arguments);return Object.prototype.hasOwnProperty.call(t,a)&&"function"==typeof t[a]?(t[a].bind(t),t[a].apply(null,s)):e({tag:a,...s.shift()})}});const s={version:"3.2.0",label:"Spelling Bee Assistant",title:"Assistant",url:"https://spelling-bee-assistant.app/",prefix:"sba",repo:"draber/draber.github.io.git",targetUrl:"https://www.nytimes.com/puzzles/spelling-bee",options:JSON.parse(localStorage.getItem("sba-settings")||"{}")},i=()=>{localStorage.setItem(s.prefix+"-settings",JSON.stringify(s.options))};s.options.version&&s.options.version!==s.version&&(s.options.oldVersion=s.options.version),s.options.version=s.version,i();var r=t=>{let e=Object.create(s);for(let a of t.split(".")){if(void 0===e[a])return;e=e[a]}return e},o=(t,e)=>{const a=t.split("."),r=a.pop();let o=s;for(let t of a){if(o[t]||(o[t]={}),"[object Object]"!==Object.prototype.toString.call(o))return console.error(`${t} is not of the type Object`),!1;o=o[t]}o[r]=e,i()};const n=r("prefix"),l=t=>t.replace(/[_-]+/," ").replace(/(?:^[\w]|[A-Z]|\b\w|\s+)/g,(function(t,e){return 0==+t?"":0===e?t.toLowerCase():t.toUpperCase()})),d=(t,e="c")=>{switch(e){case"c":return l(n+"_"+t);case"d":return(t=>t.replace(/[\W_]+/g," ").split(/ |\B(?=[A-Z])/).map((t=>t.toLowerCase())).join("-"))(n+t.charAt(0).toUpperCase()+t.slice(1));default:return n+t}};let p;const h=window.gameData.today;let c;const g=()=>{p.foundPangrams=p.foundTerms.filter((t=>p.pangrams.includes(t))),p.remainders=p.answers.filter((t=>!p.foundTerms.includes(t))),c.trigger(d("wordsUpdated"))};var u=(t,e)=>{c=t,(t=>{p={answers:h.answers,pangrams:h.pangrams,foundTerms:t},g()})(e),c.on(d("newWord"),(t=>{var e;e=t.detail,p.foundTerms.push(e),g()}))},b=t=>p[t],m=t=>p[t].length,f=t=>{const e=p[t];let a=0;return e.forEach((t=>{p.pangrams.includes(t)?a+=t.length+7:t.length>4?a+=t.length:a+=1})),a},x=()=>h.id,v=()=>h.centerLetter;const y={options:{children:{path:"M16 14c0-2.203-1.797-4-4-4s-4 1.797-4 4 1.797 4 4 4 4-1.797 4-4zm8-1.703v3.469c0 .234-.187.516-.438.562l-2.891.438a8.86 8.86 0 01-.609 1.422c.531.766 1.094 1.453 1.672 2.156.094.109.156.25.156.391s-.047.25-.141.359c-.375.5-2.484 2.797-3.016 2.797a.795.795 0 01-.406-.141l-2.156-1.687a9.449 9.449 0 01-1.422.594c-.109.953-.203 1.969-.453 2.906a.573.573 0 01-.562.438h-3.469c-.281 0-.531-.203-.562-.469l-.438-2.875a9.194 9.194 0 01-1.406-.578l-2.203 1.672c-.109.094-.25.141-.391.141s-.281-.063-.391-.172c-.828-.75-1.922-1.719-2.578-2.625a.607.607 0 01.016-.718c.531-.719 1.109-1.406 1.641-2.141a8.324 8.324 0 01-.641-1.547l-2.859-.422A.57.57 0 010 15.705v-3.469c0-.234.187-.516.422-.562l2.906-.438c.156-.5.359-.969.609-1.437a37.64 37.64 0 00-1.672-2.156c-.094-.109-.156-.234-.156-.375s.063-.25.141-.359c.375-.516 2.484-2.797 3.016-2.797.141 0 .281.063.406.156L7.828 5.94a9.449 9.449 0 011.422-.594c.109-.953.203-1.969.453-2.906a.573.573 0 01.562-.438h3.469c.281 0 .531.203.562.469l.438 2.875c.484.156.953.344 1.406.578l2.219-1.672c.094-.094.234-.141.375-.141s.281.063.391.156c.828.766 1.922 1.734 2.578 2.656a.534.534 0 01.109.344c0 .141-.047.25-.125.359-.531.719-1.109 1.406-1.641 2.141.266.5.484 1.016.641 1.531l2.859.438a.57.57 0 01.453.562z"},width:24,height:28},darkMode:{children:{path:"M12.018 1.982A12.018 12.018 0 000 14a12.018 12.018 0 0012.018 12.018A12.018 12.018 0 0024.036 14 12.018 12.018 0 0012.018 1.982zm0 3.293A8.725 8.725 0 0120.743 14a8.725 8.725 0 01-8.725 8.725z"},width:24,height:28}},w=t=>{if(!y[t])return console.error(`Icon ${t} doesn't exist`),!1;const e=y[t],s=a.svg({attributes:{viewBox:`0 0 ${e.width} ${e.height}`},svg:!0});for(const[t,i]of Object.entries(e.children))s.append(a[t]({attributes:{d:i},svg:!0}));return s};class k{getState(){const t=r(`options.${this.key}`);return void 0!==t?t:this.defaultState}setState(t){return this.canChangeState&&o(`options.${this.key}`,t),this}toggle(t){return this.canChangeState?(this.setState(t),this.hasUi()&&this.ui.classList.toggle("inactive",!t),this):this}enableTool(t,e,s){return this.tool=a.div({events:{click:()=>{this.toggle(!this.getState()),this.tool.title=this.getState()?s:e}},attributes:{title:this.getState()?s:e},data:{tool:this.key},html:w(t)}),this}hasUi(){return this.ui instanceof HTMLElement}on(t,e){return this.ui.addEventListener(t,e),this}trigger(t,e){return this.ui.dispatchEvent(e?new CustomEvent(t,{detail:e}):new Event(t)),this}constructor(t,{key:e,canChangeState:a,defaultState:s}={}){if(!t)throw new TypeError(`Missing 'title' from ${this.constructor.name}`);this.title=t,this.key=e||l(t),this.canChangeState=void 0!==a&&a,this.defaultState=void 0===s||s,this.setState(this.getState()),this.ui}}class S extends k{attach(t="append"){return this.hasUi()?(this.ui.dataset.ui=this.key,(this.target||this.app.ui)[t](this.ui),this):this}add(t="append"){return this.attach(t)}constructor(t,e,a,{key:s,canChangeState:i,defaultState:r}={}){super(e,{key:s,canChangeState:i,defaultState:r}),this.target,this.description=a||"",this.app=t}}class C extends S{getContainer(){const t=d("popup-container","d");let e=a.$(`[data-ui="${t}"]`);return e||(e=a.template({data:{ui:t}}),a.$("body").append(e)),e}create(){return a.div({classNames:["sb-modal-frame","left-aligned"],attributes:{role:"button"},data:{ui:this.key},events:{click:t=>{t.stopPropagation()}},html:[a.div({attributes:{role:"button"},classNames:["sb-modal-close"],text:"Ã—",events:{click:()=>{this.toggle(!1)}}}),a.div({classNames:["sb-modal-content"],html:[a.div({classNames:["sb-modal-header"],html:[this.puTitle,this.puSubTitle]}),this.puBody]})]})}setContent(t){this.puBody.innerHTML="",this.puBody.append(a.htmlToNode(t)),this.puBody.append(this.puFooter)}setTitle(t){this.puTitle.innerHTML=t}setSubtitle(t){this.puSubTitle.innerHTML=t}toggle(t){const e=a.$(".sb-modal-close",this.modalWrapper);return!this.getState()&&e&&e.click(),t?(this.modalWrapper.append(this.ui),this.modalSystem.classList.add("sb-modal-open")):(this.getContainer().append(this.ui),this.modalSystem.classList.remove("sb-modal-open")),super.toggle(t),this.app.trigger(d("popup"),{plugin:this}),this}constructor(t,e,s,{key:i}={}){super(t,e,s,{key:i,canChangeState:!0,defaultState:!1}),this.modalSystem=a.$(".sb-modal-system"),this.modalWrapper=a.$(".sb-modal-wrapper",this.modalSystem),this.puTitle=a.h3({classNames:["sb-modal-title"],text:e}),this.puSubTitle=a.p({classNames:["sb-modal-message"],text:s}),this.puBody=a.div({classNames:["sb-modal-body"]}),this.puFooter=a.div({classNames:["sb-modal-message","sba-modal-footer"],html:[a.a({text:r("label")+" v"+r("version"),attributes:{href:r("url"),target:"_blank"}})]}),this.app.popups||(this.app.popups=new Map),this.app.popups.has(i)||this.app.popups.set(i,this.create()),this.target=this.getContainer(),this.ui=this.app.popups.get(i)}}var z=(t,e)=>{e.innerHTML="";const s=a.tbody();return t.forEach((t=>{const e=a.tr();t.forEach((t=>{e.append(a.td({text:t}))})),s.append(e)})),e.append(s),e};class N extends S{toggleDecoration(t){return a.$$("tr",t.ui).forEach(((e,s)=>{const i=Array.from(a.$$("td",e)).map((t=>/^\d+$/.test(t.textContent)?parseInt(t.textContent):t.textContent));t.cssMarkers[this.marker](i,s)&&e.classList.toggle(d(this.className,"d"),this.getState())})),this}toggle(t){return super.toggle(t),this.plugins.forEach((t=>{this.toggleDecoration(t)})),this}constructor(t,e,a,{canChangeState:s,defaultState:i=!0,marker:r,className:o}={}){super(t,e,a,{canChangeState:s,defaultState:i}),this.plugins=new Set,this.marker=r,this.className=o||r,t.on(d("paneUpdated"),(t=>{if(!(t.detail&&t.detail.plugin&&t.detail.plugin.cssMarkers&&t.detail.plugin.cssMarkers[this.marker]))return!1;this.plugins.has(t.detail.plugin)||this.plugins.add(t.detail.plugin),this.toggleDecoration(t.detail.plugin)})),this.add()}}const T={Styles:class extends S{constructor(t){super(t,"Styles"),this.target=a.$("head"),this.ui=a.style({text:'[data-sba-theme=light]{--text-color:#000;--site-text-color:rgba(0,0,0,.9);--link-color:#326891;--link-visited-color:#326891;--link-hover-color:#5f8ab1;--body-bg-color:#fff;--modal-bg-color:rgba(255,255,255,.85);--border-color:#dcdcdc;--area-bg-color:#e6e6e6;--invalid-color:#a2a2a2;--card-color:rgba(248,205,5,.1);--success-color:#248a17}[data-sba-theme=dark]{--text-color:#e7eae1;--site-text-color:rgba(255,255,255,.9);--link-color:#51a9f7;--link-visited-color:#8dc6f8;--link-hover-color:#8dc6f8;--body-bg-color:#111;--modal-bg-color:rgba(17,17,17,.85);--border-color:#333;--area-bg-color:#393939;--invalid-color:#666;--card-color:#393939;--success-color:#47c537}html{--highlight-color: rgb(248, 205, 5);--shadow-light-color: rgba(248, 205, 5, .35);--shadow-dark-color: rgba(248, 205, 5, .7)}.pz-game-field{background:inherit;color:inherit}.sb-wordlist-items-pag>li.sba-pangram{border-bottom:2px var(--highlight-color) solid}.sb-wordlist-items-pag>li.sb-anagram a{color:var(--invalid-color)}.sb-modal-scrim{z-index:6}[data-sba-theme=dark]{background:var(--body-bg-color);color:var(--text-color)}[data-sba-theme=dark] .pz-moment__loading{color:#000}[data-sba-theme=dark] .pz-game-wrapper{background:inherit !important;color:inherit}[data-sba-theme=dark] .pz-nav__hamburger-inner,[data-sba-theme=dark] .pz-nav__hamburger-inner::before,[data-sba-theme=dark] .pz-nav__hamburger-inner::after{background-color:var(--text-color)}[data-sba-theme=dark] .pz-nav{width:100%;background:var(--body-bg-color)}[data-sba-theme=dark] .pz-nav__logo{filter:invert(1)}[data-sba-theme=dark] .sb-modal-scrim{background:var(--modal-bg-color);color:var(--text-color)}[data-sba-theme=dark] .pz-modal__title,[data-sba-theme=dark] .sb-modal-close{color:var(--text-color)}[data-sba-theme=dark] .sb-modal-frame,[data-sba-theme=dark] .pz-modal__button.white{background:var(--body-bg-color);color:var(--text-color)}[data-sba-theme=dark] .pz-modal__button.white:hover{background:var(--area-bg-color)}[data-sba-theme=dark] .sb-message{background:var(--area-bg-color)}[data-sba-theme=dark] .sb-input-invalid{color:var(--invalid-color)}[data-sba-theme=dark] .sb-toggle-expand{box-shadow:none}[data-sba-theme=dark] .sb-progress-marker .sb-progress-value,[data-sba-theme=dark] .hive-cell.center .cell-fill{background:var(--highlight-color);fill:var(--highlight-color);color:var(--body-bg-color)}[data-sba-theme=dark] .sb-input-bright{color:var(--highlight-color)}[data-sba-theme=dark] .hive-cell.outer .cell-fill{fill:var(--area-bg-color)}[data-sba-theme=dark] .cell-fill{stroke:var(--body-bg-color)}[data-sba-theme=dark] .cell-letter{fill:var(--text-color)}[data-sba-theme=dark] .hive-cell.center .cell-letter{fill:var(--body-bg-color)}[data-sba-theme=dark] .pz-toolbar-button:hover{background:var(--area-bg-color);color:var(--text-color)}[data-sba-theme=dark] .hive-action:not(.hive-action__shuffle){background:var(--body-bg-color);color:var(--text-color)}[data-sba-theme=dark] .hive-action:not(.hive-action__shuffle):hover{background:var(--area-bg-color)}[data-sba-theme=dark] .hive-action__shuffle{filter:invert(100%)}[data-sba-theme=dark] *:not(.hive-action__shuffle):not(.sba-pangram):not(.sba-preeminent){border-color:var(--border-color) !important}[data-ui=setUp] li{position:relative;margin:0 0 5px 22px}[data-ui=setUp] label{cursor:pointer;overflow:hidden}[data-ui=setUp] label:before{content:"";border:2px solid var(--border-color);width:14px;height:14px;display:inline-block;border-radius:3px;position:absolute;left:-21px;top:4px}[data-ui=setUp] input{position:absolute;left:-40px;top:-12px;visibility:hidden;cursor:pointer}[data-ui=setUp] input:checked:after{content:"âœ”";color:var(--highlight-color);position:absolute;top:3px;left:16px;font-size:20px;visibility:visible}[data-ui=setUp] b{font-weight:bold}[data-ui=setUp] i{font-style:italic}[data-ui=setUp] i::before{content:" - "}.sbaContainer{width:100%;max-width:1080px;margin:0 auto;height:0;overflow-y:visible;position:relative;z-index:5}[data-sba-has-overlay=true] .sbaContainer{z-index:-1}[data-sba-has-overlay=true] .pz-game-wrapper{background:transparent !important}[data-sba-has-overlay=true] .sb-expanded{background:var(--body-bg-color)}.sba{position:absolute;left:100%;top:121px;z-index:3;width:160px;box-sizing:border-box;padding:0 8px 5px;background:var(--body-bg-color);border-width:1px;border-color:var(--border-color);border-radius:6px;border-style:solid}.sba.inactive{display:none}.sba *,.sba *:before,.sba *:after{box-sizing:border-box}.sba *:focus{outline:0}.sba [data-ui=header]{display:flex;gap:8px}.sba [data-ui=header] .toolbar{display:flex;align-items:stretch;gap:1px}.sba [data-ui=header] .toolbar div{padding:10px 3px 2px 3px}.sba [data-ui=header] svg{width:11px;cursor:pointer;fill:currentColor}.sba .header{font-weight:bold;line-height:32px;flex-grow:2;text-indent:1px}.sba progress{-webkit-appearance:none;appearance:none;width:100%;border-radius:0;margin:0 0 2px 0;height:6px;padding:0;border:1px var(--border-color) solid;background:transparent;display:block}.sba progress.inactive{display:none}.sba progress::-webkit-progress-bar{background-color:transparent}.sba progress::-webkit-progress-value{background-color:var(--highlight-color);height:4px}.sba progress::-moz-progress-bar{background-color:var(--highlight-color)}.sba details{font-size:90%;max-height:800px;transition:max-height .25s ease-in;margin-bottom:1px}.sba details.inactive{height:0;max-height:0;transition:max-height .25s ease-out;overflow:hidden;margin:0}.sba summary{font-size:13px;line-height:20px;padding:1px 6px 0 6px;background:var(--area-bg-color);color:var(--text-color);cursor:pointer;position:relative;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sba .pane{border:1px solid var(--border-color);border-top:none;width:100%;font-size:85%;margin-bottom:2px}.sba table{border-collapse:collapse;table-layout:fixed}.sba tr.sba-preeminent{font-weight:bold;border-bottom:2px solid var(--highlight-color) !important}.sba tr.sba-completed{color:var(--invalid-color);font-weight:normal}.sba tr.sba-hidden{display:none}.sba td{border:1px solid var(--border-color);border-top:none;white-space:nowrap;text-align:center;padding:3px 0;width:26px}.sba td:first-of-type{text-align:left;width:auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:3px 3px}.sba [data-ui=scoreSoFar] tbody tr:first-child td,.sba [data-ui=spoilers] tbody tr:first-child td,.sba [data-ui=startingWithâ€¦] tbody tr:first-child td{font-weight:bold;font-size:92%}.sba [data-ui=startingWithâ€¦] tbody tr td:first-child{text-align:center;text-transform:uppercase}.sba [data-ui=footer]{color:currentColor;opacity:.6;font-size:10px;text-align:right;display:block;padding-top:8px}.sba [data-ui=footer]:hover{opacity:.8;text-decoration:underline}.sba .spill-title{padding:8px 6px 0;text-align:center}.sba .spill{text-align:center;padding:14px 0;font-size:280%}.sba ul.pane{padding:5px}.sba [data-ui=surrender] .pane{padding:10px 5px}.sba [data-ui=surrender] button{margin:0 auto;display:block;font-size:100%;white-space:nowrap;padding:12px 10px}.sba label{cursor:pointer;position:relative;line-height:19px;white-space:nowrap}.sba label input{position:relative;top:2px;margin:0 5px 0 0}.pz-desktop .sba details[open] summary:before{transform:rotate(-90deg);left:10px;top:1px}.pz-desktop .sba summary{list-style:none;padding:1px 15px 0 21px}.pz-desktop .sba summary::marker{display:none}.pz-desktop .sba summary:before{content:"â¯";font-size:9px;position:absolute;display:inline-block;transform:rotate(90deg);transform-origin:center;left:7px;top:0}[data-sba-theme].pz-spelling-bee-congrats [data-ui=setUp].left-aligned .sb-modal-content .sba-modal-footer{text-align:right;border-top:1px solid var(--border-color);padding-top:10px;font-size:13px;display:flex;flex-direction:row-reverse;justify-content:space-between;align-items:center;text-align:right;border-top:1px solid var(--border-color);padding-top:10px}[data-sba-theme].pz-spelling-bee-congrats [data-ui=setUp].left-aligned .sb-modal-content .sba-modal-footer button{padding:6px 10px;margin:0}[data-sba-theme].pz-spelling-bee-congrats .left-aligned .sb-modal-content .sb-modal-body::after{background:linear-gradient(180deg, transparent 0%, var(--modal-bg-color) 56.65%, var(--body-bg-color) 100%)}@media(min-width: 992px){[data-sba-theme].pz-page [data-ui=setUp] h4{font-size:20px}}@media(min-width: 768px){[data-sba-theme].pz-page [data-ui=setUp].left-aligned .sb-modal-content .sb-modal-body{padding-right:56px}[data-sba-theme].pz-page [data-ui=setUp].left-aligned .sb-modal-content .sb-modal-header{padding-right:56px}[data-sba-theme].pz-page [data-ui=setUp].left-aligned .sb-modal-content .sba-modal-footer{text-align:right;border-top:1px solid var(--border-color);padding-top:10px}}@media(max-width: 1444px){.sbaContainer{max-width:none}.sba{top:73px;left:12px}}@media(max-width: 767.98px){.sba{width:130px;top:158px;left:auto;right:12px;padding:0 5px 3px}.sba [data-ui=spillTheBeans] .spill-title{display:none}[data-sba-active=true] .sb-controls{top:0;left:12px;transform:none;max-width:calc(100vw - 166px)}[data-sba-active=true] .hive-actions{max-width:calc(100vw - 166px)}[data-sba-active=true] .hive-actions .hive-action{max-width:none;min-width:auto;margin:10px 0;flex:auto;padding:10px}[data-sba-active=true] .hive-actions .hive-action:nth-child(2){margin:10px 8px;width:50px;height:38px;width:36px}.pz-mobile [data-ui=setUp] b{display:block}.pz-mobile [data-ui=setUp] i{margin-bottom:5px}.pz-mobile [data-ui=setUp] i::before{content:normal}}'}),t.on(d("destroy"),(()=>this.ui.remove())),this.add()}},Launcher:class extends S{buildUiAndTarget(){let t=["pz-toolbar-button__sba"];this.app.envIs("mobile")?(this.target=a.$("#js-mobile-toolbar"),t.push("pz-nav__toolbar-item")):(this.target=a.div(),a.$$("#portal-game-toolbar > span").forEach((t=>{this.target.append(t)})),a.$("#portal-game-toolbar").append(this.target),t.push("pz-toolbar-button")),this.ui=a.span({text:r("title"),events:{click:()=>{const t=!this.app.getState();this.app.toggle(t),this.app.gameWrapper.dataset.sbaActive=t}},attributes:{role:"presentation"},classNames:t})}constructor(t){super(t,"Launcher"),this.buildUiAndTarget(),t.on(d("destroy"),(()=>this.ui.remove())),this.add()}},DarkMode:class extends S{toggle(t){return super.toggle(t),document.body.dataset[d("theme")]=t?"dark":"light",this}constructor(t){super(t,"Dark Mode","Applies a dark theme to this page",{canChangeState:!0,defaultState:!1}),this.enableTool("darkMode","Dark mode on","Dark mode off"),this.toggle(this.getState()),this.add()}},Header:class extends S{constructor(t){super(t,r("title"),"",{key:"header"}),this.ui=a.div(),t.dragHandle=a.div({text:this.title,classNames:["header"]}),this.ui.append(t.dragHandle),t.on(d("toolsReady"),(t=>{const e=a.div({classNames:["toolbar"]});return t.detail.forEach((t=>{e.append(t)})),this.ui.append(e),this})),this.add()}},SetUp:class extends C{constructor(t){super(t,r("label"),"Configure the assistant the way you want it.",{canChangeState:!0,defaultState:!1,key:"setUp"});const e=a.ul({classNames:["pane"],events:{click:e=>{"INPUT"===e.target.tagName&&t.plugins.get(e.target.name).toggle(e.target.checked)},toggle:t=>{t.target.open||this.toggle(!1)}}});this.enableTool("options","Show set-up","Hide set-up"),t.on(d("popup"),(t=>{if(t.detail.plugin===this&&this.getState()){const t=r("options");a.$$("input",e).forEach((e=>{console.log(e.name,!!t[e.name]),e.checked=!!t[e.name]}))}})),t.on(d("pluginsReady"),(t=>{const s=new Map;t.detail.forEach(((t,i)=>{if(!t.canChangeState||t===this)return!1;const r=a.input({attributes:{type:"checkbox",name:i,checked:!!t.getState()}});e.append(a.li({html:a.label({html:[r,a.b({text:t.title}),a.i({text:t.description})]})})),s.set(i,{setting:r,default:!!t.defaultState})})),this.setContent(e),this.puFooter.append(a.div({classNames:[d("factory-reset","d")],html:a.button({classNames:["hive-action"],text:"Reset to defaults",attributes:{type:"text"},events:{click:()=>{s.forEach((t=>{t.setting.checked!==t.default&&t.setting.click()}))}}})}))})),this.add()}},ProgressBar:class extends S{refresh(){let t=100*f("foundTerms")/f("answers");t=Math.min(Number(Math.round(t+"e2")+"e-2"),100),this.ui.value=t,this.ui.textContent=t+"%",this.ui.title=`Progress: ${t}%`}constructor(t){super(t,"Progress Bar","Displays your progress as a yellow bar",{canChangeState:!0}),this.ui=a.progress({attributes:{max:100}}),t.on(d("wordsUpdated"),(()=>{this.refresh()})),this.refresh(),this.add()}},ScoreSoFar:class extends S{getData(){return[["","âœ“","?","âˆ‘"],["Words",m("foundTerms"),m("remainders"),m("answers")],["Points",f("foundTerms"),f("remainders"),f("answers")]]}constructor(t){super(t,"Score so far","The number of words and points and how many have been found",{canChangeState:!0});const e=a.table({classNames:["pane"]});this.ui=a.details({attributes:{open:!0},html:[a.summary({text:this.title}),e]}),t.on(d("wordsUpdated"),(()=>{z(this.getData(),e)})),this.add()}},Spoilers:class extends S{getData(){const t={},e=m("pangrams"),a=m("foundPangrams"),s=[["","âœ“","?","âˆ‘"]];b("answers").forEach((e=>{t[e.length]=t[e.length]||{found:0,missing:0,total:0},b("foundTerms").includes(e)?t[e.length].found++:t[e.length].missing++,t[e.length].total++}));let i=Object.keys(t);return i.sort(((t,e)=>t-e)),i.forEach((e=>{s.push([e+" "+(e>1?"letters":"letter"),t[e].found,t[e].missing,t[e].total])})),s.push(["Pangrams",a,e-a,e]),s}constructor(t){super(t,"Spoilers","The number of words by length, also the number of pangrams",{canChangeState:!0}),this.cssMarkers={completed:(t,e)=>e>0&&0===t[2],preeminent:(t,e)=>e>0&&"Pangrams"===t[0]};const e=a.table({classNames:["pane"]});this.ui=a.details({html:[a.summary({text:this.title}),e]}),t.on(d("wordsUpdated"),(()=>{z(this.getData(),e),t.trigger(d("paneUpdated"),{plugin:this})})),this.add()}},StartingWith:class extends S{getData(){const t={},e=b("answers").sort(((t,e)=>t.startsWith(this.centerLetter)?-1:e.startsWith(this.centerLetter)?1:t<e?-1:1)),a=b("remainders"),s={foundTerms:0,remainders:0,total:0};e.forEach((e=>{const i=e.charAt(0);void 0===t[i]&&(t[i]={...s}),a.includes(e)?t[i].remainders++:t[i].foundTerms++,t[i].total++}));const i=[["","âœ“","?","âˆ‘"]];for(let[e,a]of Object.entries(t))a=Object.values(a),a.unshift(e),i.push(a);return i}constructor(t){super(t,"Starting withâ€¦","The number of words by first letter",{canChangeState:!0}),this.cssMarkers={completed:(t,e)=>e>0&&0===t[2],preeminent:(t,e)=>e>0&&t[0]===v()};const e=a.table({classNames:["pane"]});this.ui=a.details({html:[a.summary({text:this.title}),e]}),t.on(d("wordsUpdated"),(()=>{z(this.getData(),e),t.trigger(d("paneUpdated"),{plugin:this})})),this.add()}},SpillTheBeans:class extends S{react(t){return t?b("remainders").filter((e=>e.startsWith(t))).length?"ðŸ™‚":"ðŸ™":"ðŸ˜"}constructor(t){super(t,"Spill the beans","An emoji that shows if the last letter was right or wrong",{canChangeState:!0});const e=a.div({text:"ðŸ˜",classNames:["spill"]});this.ui=a.details({html:[a.summary({text:this.title}),a.div({classNames:["pane"],html:[a.div({text:"Watch my reaction!",classNames:["spill-title"]}),e]})]}),this.app.on(d("newInput"),(t=>{e.textContent=this.react(t.detail)})),this.add()}},StepsToSuccess:class extends S{getData(){const t=f("answers");return[["Beginner",0],["Good Start",2],["Moving Up",5],["Good",8],["Solid",15],["Nice",25],["Great",40],["Amazing",50],["Genius",70],["Queen Bee",100]].map((e=>[e[0],Math.round(e[1]/100*t)]))}getCurrentTier(){return this.getData().filter((t=>t[1]<=f("foundTerms"))).pop()[1]}constructor(t){super(t,"Steps to success","The number of points required for each level",{canChangeState:!0}),this.cssMarkers={completed:t=>t[1]<f("foundTerms")&&t[1]!==this.getCurrentTier(),preeminent:t=>t[1]===this.getCurrentTier()};const e=a.table({classNames:["pane"]});this.ui=a.details({html:[a.summary({text:this.title}),e]}),t.on(d("wordsUpdated"),(()=>{z(this.getData(),e),t.trigger(d("paneUpdated"),{plugin:this})})),this.add()}},Surrender:class extends S{buildEntry(t){return a.li({classNames:b("pangrams").includes(t)?["sb-anagram",d("pangram")]:["sb-anagram"],html:a.a({text:t,attributes:{href:`https://www.google.com/search?q=${t}`,target:"_blank"}})})}resolve(){return!this.usedOnce&&(this.app.observer.disconnect(),b("remainders").forEach((t=>this.app.resultList.append(this.buildEntry(t)))),this.usedOnce=!0,this.app.trigger(d("wordsUpdated")),!0)}constructor(t){super(t,"Surrender","Reveals the solution of the game",{canChangeState:!0}),this.usedOnce=!1,this.ui=a.details({html:[a.summary({text:this.title}),a.div({classNames:["pane"],html:a.button({tag:"button",classNames:["hive-action"],text:"Display answers",attributes:{type:"button"},events:{click:()=>this.resolve()}})})]}),this.add()}},TrMarkCompleted:class extends N{constructor(t){super(t,"Grey out completed","Greys out lines in which all items have been found",{canChangeState:!0,marker:"completed"}),this.add()}},TrHideCompleted:class extends N{constructor(t){super(t,"Hide completed","Hide lines in which all items have been found",{canChangeState:!0,defaultState:!1,marker:"completed",className:"hidden"}),this.add()}},TrMarkPreeminent:class extends N{constructor(t){super(t,"Highlight preeminent","Highlights the most important line in a table",{canChangeState:!0,marker:"preeminent"}),this.add()}},HighlightPangrams:class extends S{toggle(t){return super.toggle(t),this.handleDecoration(),this}handleDecoration(){const t=b("pangrams");return a.$$("li",this.app.resultList).forEach((e=>{const a=e.textContent;t.includes(a)&&e.classList.toggle(d("pangram","d"),this.getState())})),this}constructor(t){super(t,"Highlight pangrams","Highlights pangrams in the result list",{canChangeState:!0}),t.on(d("wordsUpdated"),(()=>{this.handleDecoration()})),this.handleDecoration(),this.add()}},Footer:class extends S{constructor(t){super(t,`${r("label")}`,"",{key:"footer"}),this.ui=a.a({text:this.title,attributes:{href:r("url"),target:"_blank"}}),this.add()}},Positioning:class extends S{add(){const t=this.getState();return this.position=t&&"[object Object]"===Object.prototype.toString.call(t)?t:this.getPosition(),this.reposition(),this.enableDrag(),super.add()}getOffset(t){return isNaN(t)?{top:0,right:0,bottom:0,left:0,...t}:{top:t,right:t,bottom:t,left:t}}getRectangles(){return{canvas:this.app.dragArea.getBoundingClientRect(),appContainer:this.app.ui.parentNode.getBoundingClientRect(),app:this.app.ui.getBoundingClientRect()}}getBoundaries(){return{top:{min:this.offset.top,max:this.rectangles.canvas.height-this.rectangles.app.height-this.offset.bottom},left:{min:this.offset.left-this.rectangles.appContainer.left,max:this.rectangles.canvas.width-this.rectangles.appContainer.left-this.rectangles.app.width-this.offset.right}}}validatePosition(t){t&&(this.position=t);const e=this.getBoundaries();return this.position.left=Math.min(e.left.max,Math.max(e.left.min,this.position.left)),this.position.top=Math.min(e.top.max,Math.max(e.top.min,this.position.top)),this.position}getMouse(t){return{left:t.screenX,top:t.screenY}}getPosition(t){let e;if(t){const a=this.getMouse(t);e={left:this.position.left+a.left-this.mouse.left,top:this.position.top+=a.top-this.mouse.top}}else{const t=getComputedStyle(this.app.ui);let s=parseInt(t.left);t.left.endsWith("%")&&(s=s*parseInt(getComputedStyle(a.$(".sbaContainer")).width)/100),e={top:parseInt(t.top),left:s}}return this.validatePosition(e)}reposition(){return this.validatePosition(),Object.assign(this.app.ui.style,{left:this.position.left+"px",top:this.position.top+"px"}),this.toggle(!!this.getState()&&this.position),this}enableDrag(){return this.app.dragHandle.style.cursor="move",this.app.on("pointerdown",(t=>{this.isLastTarget=t.target.isSameNode(this.app.dragHandle)})).on("pointerup",(()=>{this.isLastTarget=!1})).on("dragend",(t=>{this.position=this.getPosition(t),this.reposition(),t.target.style.opacity="1"})).on("dragstart",(t=>{if(!this.isLastTarget)return t.preventDefault(),!1;t.target.style.opacity=".2",this.position=this.getPosition(),this.mouse=this.getMouse(t)})).on("dragover",(t=>t.preventDefault())),this.app.dragArea.addEventListener("dragover",(t=>t.preventDefault())),this}toggle(t){return super.toggle(t?this.position:t)}constructor(t){super(t,"Memorize position","Places the assistant where it had been moved to last time",{key:"positioning",canChangeState:!0,defaultState:!1}),this.mouse,this.offset=this.getOffset(this.app.dragOffset||0),this.isLastTarget=!1,this.rectangles=this.getRectangles(),["orientationchange","resize"].forEach((t=>{window.addEventListener(t,(()=>{this.rectangles=this.getRectangles(),this.reposition()}))})),this.add()}}};const L=a.$("#js-hook-game-wrapper");a.$$(".pz-moment__button-wrapper .pz-moment__button.primary").forEach((t=>{t.addEventListener("click",(()=>{L.dispatchEvent(new Event(d("gameReady")))}))})),new class extends k{getSyncData(){let t=localStorage.getItem("sb-today");return!!t&&(t=JSON.parse(t),!(!t.id||t.id!==x())&&(t.words||[]))}envIs(t){return document.body.classList.contains("pz-"+t)}async getResults(){let t,e=5;return await new Promise((a=>{const s=setInterval((()=>{t=this.getSyncData(),!t&&e||(a(t||[]),clearInterval(s)),e--}),300)}))}registerPlugins(){return Object.values((t=>(t.envIs("desktop")||delete T.Positioning,T))(this)).forEach((t=>{const e=new t(this);this.plugins.set(e.key,e)})),this.trigger(d("pluginsReady"),this.plugins),this.registerTools()}registerTools(){return this.plugins.forEach((t=>{t.tool&&this.toolButtons.set(t.key,t.tool)})),this.trigger(d("toolsReady"),this.toolButtons)}constructor(t){super(r("label"),{canChangeState:!0,key:d("app")}),this.gameWrapper=t,this.modalWrapper=a.$(".sb-modal-wrapper",this.gameWrapper);const e=a.$(`[data-id="${this.key}"]`);e&&e.dispatchEvent(new Event(d("destroy"))),this.plugins=new Map,this.factorySettings=new Map,this.toolButtons=new Map,this.parent=a.div({classNames:[d("container")]}),this.resultList=a.$(".sb-wordlist-items-pag",t);const s={};s[d("destroy")]=()=>{this.observer.disconnect(),this.parent.remove(),delete document.body.dataset[d("theme")]};const i=[r("prefix")];!1===this.getState()&&i.push("inactive"),this.ui=a.div({attributes:{draggable:this.envIs("desktop")},data:{id:this.key,version:r("version")},classNames:i,events:s}),this.dragHandle=this.ui,this.dragArea=this.gameWrapper,this.dragOffset={top:69,right:12,bottom:12,left:12},this.observer=(()=>{const t=new MutationObserver((t=>{t.forEach((t=>{if(!t.target instanceof HTMLElement)return!1;switch(!0){case"attributes"===t.type&&t.target.classList.contains("sb-content-box"):document.body.dataset[d("hasOverlay")]=t.target.classList.contains("sb-expanded");break;case"childList"===t.type&&t.target.isSameNode(this.modalWrapper):document.body.dataset[d("hasOverlay")]=!!t.target.hasChildNodes();break;case"childList"===t.type&&t.target.classList.contains("sb-hive-input-content"):this.trigger(d("newInput"),t.target.textContent.trim());break;case"childList"===t.type&&t.target.isSameNode(this.resultList)&&!!t.addedNodes.length&&!!t.addedNodes[0].textContent.trim()&&t.addedNodes[0]instanceof HTMLElement:this.trigger(d("newWord"),t.addedNodes[0].textContent.trim())}}))}));return t.observe(this.gameWrapper,{childList:!0,subtree:!0,attributes:!0}),t})(),this.gameWrapper.addEventListener(d("gameReady"),(()=>{this.getResults().then((t=>{u(this,t),this.parent.append(this.ui),this.gameWrapper.before(this.parent),this.gameWrapper.dataset.sbaActive=this.getState(),this.registerPlugins(),this.trigger(d("wordsUpdated"))}))}))}}(L)}();