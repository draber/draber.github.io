!function(){"use strict";const t={$:(t,e=null)=>"string"==typeof t?(e||document).querySelector(t):t||null,$$:(t,e=null)=>[].slice.call((e||document).querySelectorAll(t)),waitFor:function(e,n=null){return new Promise((a=>{const s=()=>{const o=t.$(e,n);o?a(o):requestAnimationFrame(s)};s()}))},toNode:t=>{const e=document.createDocumentFragment();if(void 0===t)return e;if(t instanceof Element||t instanceof DocumentFragment)return t;if("number"==typeof t&&(t=t.toString()),"string"==typeof t||t instanceof String){t=(new DOMParser).parseFromString(t,"text/html").body.childNodes}if("function"==typeof t.forEach)return Array.from(t).forEach((t=>{e.append(t)})),e;console.error("Expected Element|DocumentFragment|Iterable|String|HTMLCode, got",t)},empty:t=>{for(;t.lastChild;)t.lastChild.remove();return t.textContent="",t}},e=function({tag:e,content:n,attributes:a={},style:s={},data:o={},events:r={},classNames:i=[],isSvg:l}={}){const d=l?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);"a"===e&&a.href&&!n&&(n=new URL(a.href).hostname);for(let[t,e]of Object.entries(a))l?d.setAttributeNS(null,t,e.toString()):"role"===t||t.startsWith("aria-")?d.setAttribute(t,e):!1!==e&&(d[t]=e.toString());for(let[t,e]of Object.entries(o))e=e.toString(),d.dataset[t]=e;for(const[t,e]of Object.entries(r))d.addEventListener(t,e,!1);return Object.assign(d.style,s),i.length&&d.classList.add(...i),void 0!==n&&d.append(t.toNode(n)),d},n=new Proxy(t,{get:(t,n)=>function(){const a=Array.from(arguments);return Object.prototype.hasOwnProperty.call(t,n)&&"function"==typeof t[n]?(t[n].bind(t),t[n].apply(null,a)):e({tag:n,...a.shift()})}});const a={version:"4.2.0",label:"Spelling Bee Assistant",title:"Assistant",url:"https://spelling-bee-assistant.app/",prefix:"sba",repo:"draber/draber.github.io.git",targetUrl:"https://www.nytimes.com/puzzles/spelling-bee",options:JSON.parse(localStorage.getItem("sba-settings")||"{}")},s=()=>{localStorage.setItem(a.prefix+"-settings",JSON.stringify(a.options))};a.options.version&&a.options.version!==a.version&&(a.options.oldVersion=a.options.version),a.options.version=a.version,s();var o=t=>{let e=Object.create(a);for(let n of t.split(".")){if(void 0===e[n])return;e=e[n]}return e},r=(t,e)=>{const n=t.split("."),o=n.pop();let r=a;for(let t of n){if(r[t]||(r[t]={}),"[object Object]"!==Object.prototype.toString.call(r))return console.error(`${t} is not of the type Object`),!1;r=r[t]}r[o]=e,s()};const i=o("prefix"),l=t=>t.replace(/[_-]+/," ").replace(/(?:^[\w]|[A-Z]|\b\w|\s+)/g,(function(t,e){return 0==+t?"":0===e?t.toLowerCase():t.toUpperCase()})),d=(t="",e="c")=>{switch(e){case"c":return l(i+"_"+t);case"d":return(t=>t.replace(/[\W_]+/g," ").split(/ |\B(?=[A-Z])/).map((t=>t.toLowerCase())).join("-"))(i+t.charAt(0).toUpperCase()+t.slice(1));default:return i+t}};let p;const c=window.gameData.today;let h;const u=()=>{p.foundPangrams=p.foundTerms.filter((t=>p.pangrams.includes(t))),p.remainders=p.answers.filter((t=>!p.foundTerms.includes(t))),h.trigger(d("refreshUi"))};var b=(t,e)=>{h=t,(t=>{p={answers:c.answers,pangrams:c.pangrams,letters:c.validLetters,foundTerms:t},u()})(e),h.on(d("newWord"),(t=>{var e;e=t.detail,p.foundTerms.push(e),u()}))},g=t=>p[t],m=t=>p[t].length,f=t=>{const e=p[t];let n=0;return e.forEach((t=>{p.pangrams.includes(t)?n+=t.length+7:t.length>4?n+=t.length:n+=1})),n},v=()=>({display:c.displayDate,print:c.printDate}),y=()=>c.centerLetter;class w{getState(){const t=o(`options.${this.key}`);return void 0!==t?t:this.defaultState}setState(t){return this.canChangeState&&r(`options.${this.key}`,t),this}toggle(t){return this.canChangeState?(this.setState(t),this.hasUi()&&this.ui.classList.toggle("inactive",!t),this):this}hasUi(){return this.ui instanceof HTMLElement}on(t,e){return this.hasUi()&&this.ui.addEventListener(t,e),this}trigger(t,e){return this.hasUi()&&this.ui.dispatchEvent(e?new CustomEvent(t,{detail:e}):new Event(t)),this}constructor(t,{key:e,canChangeState:n,defaultState:a}={}){if(!t)throw new TypeError(`Missing 'title' from ${this.constructor.name}`);this.title=t,this.key=e||l(t),this.canChangeState=void 0!==n&&n,this.defaultState=void 0===a||a,this.setState(this.getState()),this.ui=null}}class x extends w{attach(){return this.hasUi()?(this.ui.dataset.ui=this.key,(this.target||this.app.ui)[this.addMethod](this.ui),this):this}add(){return this.attach()}run(t){return this}constructor(t,e,n,{key:a,canChangeState:s,defaultState:o,menuIcon:r,runEvt:i,addMethod:l}={}){super(e,{key:a,canChangeState:s,defaultState:o}),this.target,this.description=n||"",this.app=t,this.addMethod=l||"append",this.menuIcon=r||"checkbox",i&&this.app.on(i,(t=>{this.run(t)}))}}class k extends x{toggle(t){return super.toggle(t),document.body.dataset[d("theme")]=t?"dark":"light",this}constructor(t){super(t,"Dark Mode","Applies a dark theme to this page",{canChangeState:!0,defaultState:!1}),this.toggle(this.getState())}}class S{buildUi(){return n.div({data:{ui:this.key},classNames:["sb-modal-content"],content:[n.div({classNames:["sb-modal-header"],content:[this.parts.title,this.parts.subtitle]}),this.parts.body,this.parts.footer]})}reset(){this.target.append(this.ui)}setContent(t,e){return this.parts[t]?(this.parts[t]=n.empty(this.parts[t]),this.parts[t].append(n.toNode(e)),this):(console.error(`Unknown target ${t}`),this)}constructor(t,e){this.app=t,this.key=e,this.parts={title:n.h3({classNames:["sb-modal-title"]}),subtitle:n.p({classNames:["sb-modal-message"]}),body:n.div({classNames:["sb-modal-body"]}),footer:n.div({classNames:["sb-modal-message","sba-modal-footer"],content:[n.a({content:o("label"),attributes:{href:o("url"),target:d()}})]})},this.ui=this.buildUi(),this.target=this.app.componentContainer,this.target.append(this.ui)}}class C extends x{toggle(t){return n.$$("[data-sba-theme]").forEach((e=>{e.style.setProperty("--dhue",t.hue),e.style.setProperty("--dsat",t.sat+"%")})),super.toggle(t)}display(t){t.display(this.panel),n.$("input:checked",this.panel.ui).focus()}constructor(t){super(t,"Dark Mode Colors","Select your favorite color scheme for the Dark Mode.",{canChangeState:!0,defaultState:{hue:0,sat:0}}),this.menuAction="panel",this.menuIcon="null",this.panelTheme="dark";const e=n.ul({classNames:[d("swatches","d")]});for(let t=0;t<360;t+=30){const a=0===t?0:25;e.append(n.li({content:[n.input({attributes:{name:"color-picker",type:"radio",value:t,checked:t===this.getState().hue,id:d("h"+t)},events:{change:()=>{this.toggle({hue:t,sat:a})}}}),n.label({attributes:{htmlFor:d("h"+t)},style:{background:`hsl(${t}, ${a}%, 22%)`}})]}))}this.panel=new S(this.app,this.key).setContent("title",this.title).setContent("subtitle",this.description).setContent("body",n.div({classNames:[d("color-selector","d")],content:[e,n.div({classNames:["hive"],content:[n.svg({classNames:["hive-cell","outer"],attributes:{viewBox:"0 0 24 21"},isSvg:!0,content:[n.path({classNames:["cell-fill"],isSvg:!0,attributes:{d:"M18 21H6L0 10.5 6 0h12l6 10.5z"}}),n.text({classNames:["cell-letter"],attributes:{x:"50%",y:"50%",dy:"0.35em"},isSvg:!0,content:"s"})]})]})]})),this.toggle(this.getState())}}class z extends x{constructor(t){super(t,o("title"),"",{key:"header"}),this.ui=n.div({content:this.title})}}class N extends x{run(t){let e=100*f("foundTerms")/f("answers");return e=Math.min(Number(Math.round(e+"e2")+"e-2"),100),this.ui.value=e,this.ui.textContent=e+"%",this.ui.title=`Progress: ${e}%`,this}constructor(t){super(t,"Progress Bar","Displays your progress as a yellow bar",{canChangeState:!0,runEvt:d("refreshUi"),addMethod:"before"}),this.ui=n.progress({attributes:{max:100}}),t.on(d("pluginsReady"),(t=>{this.app.plugins.has("yourProgress")&&(this.ui.style.cursor="pointer",this.ui.addEventListener("pointerup",(()=>{this.app.plugins.get("yourProgress").display()})))})),this.target=n.$(".sb-wordlist-heading",this.app.gameWrapper),this.toggle(this.getState())}}class A extends x{run(t){this.pane=n.empty(this.pane);const e=n.tbody(),a=this.getData();this.hasHeadRow&&this.pane.append(this.buildHead(a.shift()));const s=a.length;let o=0;return a.forEach(((t,a)=>{o=t.length;const r=[];for(const[e,n]of Object.entries(this.cssMarkers))n(t,a,s)&&r.push(d(e,"d"));const i=n.tr({classNames:r});t.forEach(((t,e)=>{const a=0===e&&this.hasHeadCol?"th":"td";i.append(n[a]({content:t}))})),e.append(i)})),this.pane.dataset.cols=o,this.pane.append(e),this}buildHead(t){return n.thead({content:n.tr({content:t.map((t=>n.th({content:t})))})})}getPane(){return this.pane}constructor(t,e,a,{canChangeState:s=!0,defaultState:o=!0,cssMarkers:r={},hasHeadRow:i=!0,hasHeadCol:l=!0}={}){super(t,e,a,{canChangeState:s,defaultState:o}),t.on(d("refreshUi"),(()=>{this.run()})),this.cssMarkers=r,this.hasHeadRow=i,this.hasHeadCol=l,this.pane=n.table({classNames:["pane",d("dataPane","d")]})}}class L extends A{getData(){const t=["foundTerms","remainders","answers"];return[["","✓","?","∑"],["W"].concat(t.map((t=>m(t)))),["P"].concat(t.map((t=>f(t))))]}constructor(t){super(t,"Score","The number of words and points and how many have been found"),this.ui=n.details({attributes:{open:!0},content:[n.summary({content:this.title}),this.getPane()]})}}class P extends x{run(t){let e="🙂";return t.detail?g("remainders").filter((e=>e.startsWith(t.detail))).length||(e="🙁"):e="😐",this.ui.textContent=e,this}constructor(t){super(t,"Spill the beans","An emoji that shows if the last letter was right or wrong",{canChangeState:!0,runEvt:d("newInput"),addMethod:"prepend"}),this.ui=n.div({content:"😐"}),this.target=n.$(".sb-controls",this.app.gameWrapper),this.toggle(!1)}}class T extends A{getData(){const t={},e=[["","✓","?","∑"]];g("answers").forEach((e=>{t[e.length]=t[e.length]||{found:0,missing:0,total:0},g("foundTerms").includes(e)?t[e.length].found++:t[e.length].missing++,t[e.length].total++}));let n=Object.keys(t);return n.sort(((t,e)=>t-e)),n.forEach((n=>{e.push([n,t[n].found,t[n].missing,t[n].total])})),e}constructor(t){super(t,"Letter count","The number of words by length",{cssMarkers:{completed:(t,e)=>0===t[2]}}),this.ui=n.details({content:[n.summary({content:this.title}),this.getPane()]}),this.toggle(this.getState())}}class E extends A{getData(){const t={},e=g("answers").sort(((t,e)=>t.startsWith(this.centerLetter)?-1:e.startsWith(this.centerLetter)?1:t<e?-1:1)),n=g("remainders"),a={foundTerms:0,remainders:0,total:0};e.forEach((e=>{const s=e.charAt(0);void 0===t[s]&&(t[s]={...a}),n.includes(e)?t[s].remainders++:t[s].foundTerms++,t[s].total++}));const s=[["","✓","?","∑"]];for(let[e,n]of Object.entries(t))n=Object.values(n),n.unshift(e),s.push(n);return s}constructor(t){super(t,"First letter","The number of words by first letter",{cssMarkers:{completed:(t,e)=>0===t[2],preeminent:(t,e)=>t[0]===y()}}),this.ui=n.details({content:[n.summary({content:this.title}),this.getPane()]}),this.toggle(this.getState())}}class M extends A{getData(){const t=m("pangrams"),e=m("foundPangrams");return[["✓","?","∑"],[e,t-e,t]]}constructor(t){super(t,"Pangrams","The number of pangrams",{cssMarkers:{completed:(t,e)=>0===t[1]},hasHeadCol:!1}),this.ui=n.details({content:[n.summary({content:this.title}),this.getPane()]}),this.toggle(this.getState())}}class B extends A{display(t){const e=f("foundTerms"),a=f("answers"),s=this.getPointsToNextTier(),o=100*e/a;let r;return r=s?n.span({content:["You are currently at ",n.b({content:e+"/"+a})," points or ",n.b({content:Math.min(Number(Math.round(o+"e2")+"e-2"),100)+"%"}),". You need ",n.b({content:s-e})," more points to go to the next level."]}):n.span({content:["Congratulations, you’ve found all ",n.b({content:e})," points!"]}),this.panel.setContent("subtitle",n.span({content:r})).setContent("body",this.getPane()),t.display(this.panel),this}getData(){const t=f("answers");return[["Beginner",0],["Good Start",2],["Moving Up",5],["Good",8],["Solid",15],["Nice",25],["Great",40],["Amazing",50],["Genius",70],["Queen Bee",100]].map((e=>[e[0],Math.round(e[1]/100*t),e[1]]))}getCurrentTier(){return this.getData().filter((t=>t[1]<=f("foundTerms"))).pop()[1]}getPointsToNextTier(){const t=this.getData().filter((t=>t[1]>f("foundTerms"))).shift();return t?t[1]:null}constructor(t){super(t,"Your Progress","The number of points required for each level",{cssMarkers:{completed:t=>t[1]<f("foundTerms")&&t[1]!==this.getCurrentTier(),preeminent:t=>t[1]===this.getCurrentTier()},hasHeadRow:!1,hasHeadCol:!1}),this.panel=new S(this.app,this.key).setContent("title",this.title),this.menuAction="panel",this.menuIcon="null"}}class D extends x{hasGeniusNo4Letters(){const t=f("answers");return t-g("answers").filter((t=>4===t.length)).length>=Math.round(.7*t)}getPerfectPangramCount(){return g("pangrams").filter((t=>7===t.length)).length}hasBingo(){return 7===Array.from(new Set(g("answers").map((t=>t.charAt[0])))).length}nytCommunity(){const t=v().print,e=`https://www.nytimes.com/${t.replace(/-/g,"/")}/crosswords/spelling-bee-${t}.html#commentsContainer`;return n.a({content:"NYT Spelling Bee Forum for today’s game",attributes:{href:e,target:d()}})}twitter(){const t=["hivemind","nytspellingbee","nytbee","nytsb"].map((t=>n.a({content:`#${t}`,attributes:{href:`https://twitter.com/hashtag/${t}`,target:d()}}))),e=[];return t.forEach((t=>{e.push(t,", ")})),e.pop(),e.push(" on Twitter"),e}nytSpotlight(){return n.a({content:"Portal to all NYT Spelling Bee Forums",attributes:{href:"https://www.nytimes.com/spotlight/spelling-bee-forum",target:d()}})}redditCommunity(){return n.a({content:"NY Times Spelling Bee Puzzle on Reddit",attributes:{href:"https://www.reddit.com/r/NYTSpellingBee/",target:d()}})}display(t){return t.display(this.panel),this}constructor(t){super(t,"Community","Spelling Bee resources suggested by the community",{canChangeState:!0}),this.menuAction="panel",this.menuIcon="null";const e=["two","three","four","five","six","seven","eight","nine","ten"],a=n.ul({content:[n.li({content:[n.h4({content:"Does today’s game have a Perfect Pangram?"}),n.p({content:(()=>{const t=this.getPerfectPangramCount();switch(t){case 0:return"No, today it doesn’t";case 1:return"Yes, today there’s one Perfect Pangram";default:return`Yes, today there are ${e[t-2]} Perfect Pangrams`}})()}),n.em({content:'Pangrams that use each letter only once are called "perfect" by the community.'})]}),n.li({content:[n.h4({content:'Does it classify as "Bingo"?'}),n.p({content:this.hasBingo()?"Yes, today is Bingo day!":"No, today it doesn’t"}),n.em({content:'"Bingo" means that all seven letters in the puzzle are used to start at least one word in the word list.'})]}),n.li({content:[n.h4({content:"Is it possible to reach Genius without using 4-letter words?"}),n.p({content:this.hasGeniusNo4Letters()?"Yes, today it is!":"No, today it isn’t"})]}),n.li({content:[n.h4({content:"Forums and Hashtags"}),n.ul({content:[n.li({content:this.nytCommunity()}),n.li({content:this.nytSpotlight()}),n.li({content:this.redditCommunity()}),n.li({content:this.twitter()})]})]})]});this.panel=new S(this.app,this.key).setContent("title",this.title).setContent("subtitle",this.description).setContent("body",a)}}class j extends x{display(t){const e=g("foundTerms"),a=g("pangrams"),s=n.ul({classNames:["sb-modal-wordlist-items"]});return g("answers").forEach((t=>{s.append(n.li({classNames:a.includes(t)?[d("pangram","d")]:[],content:[n.span({classNames:e.includes(t)?["check","checked"]:["check"]}),n.span({classNames:["sb-anagram"],content:t})]}))})),this.panel.setContent("body",[n.div({content:g("letters").join(""),classNames:["sb-modal-letters"]}),s]),t.display(this.panel),this}constructor(t){super(t,"Today’s Answers","Reveals the solution of the game",{canChangeState:!0,defaultState:!1,key:"todaysAnswers"}),this.marker=d("resolved","d"),this.panel=new S(this.app,this.key).setContent("title",this.title).setContent("subtitle",v().display),this.menuAction="panel",this.menuIcon="warning"}}class _ extends x{toggle(t){return super.toggle(t),this.run()}run(t){const e=g("pangrams"),a=t&&t.detail?t.detail:this.app.resultList;return n.$$("li",a).forEach((t=>{const a=t.textContent;(e.includes(a)||n.$(".pangram",t))&&t.classList.toggle(this.marker,this.getState())})),this}constructor(t){super(t,"Highlight PangramHl","",{canChangeState:!1,runEvt:d("refreshUi")}),this.marker=d("pangram","d"),this.app.on(d("yesterday"),(t=>{this.run(t)})),this.run()}}class $ extends x{toggle(t){return super.toggle(t),this.run()}listener(t){return!(!t.target.classList.contains("sb-anagram")||!t.target.closest(".sb-anagram"))&&(0===t.button?(window.open(`https://www.google.com/search?q=${t.target.textContent}`,d()),!0):void 0)}run(t=null){const e=(this.getState()?"add":"remove")+"EventListener";return[this.app.modalWrapper,this.app.resultList].forEach((t=>{t[e]("pointerup",this.listener),t.classList.toggle(d("googlified","d"),this.getState())})),this}constructor(t){super(t,"Googlify","Link all result terms to Google",{canChangeState:!1}),this.run()}}class I extends x{constructor(t){super(t,"Styles",""),this.target=n.$("head"),this.ui=n.style({content:'@charset "UTF-8";\n/**\n *  Spelling Bee Assistant is an add-on for Spelling Bee, the New York Times’ popular word puzzle\n * \n *  Copyright (C) 2020  Dieter Raber\n *  https://www.gnu.org/licenses/gpl-3.0.en.html\n */\n/**\n *  Spelling Bee Assistant is an add-on for Spelling Bee, the New York Times’ popular word puzzle\n * \n *  Copyright (C) 2020  Dieter Raber\n *  https://www.gnu.org/licenses/gpl-3.0.en.html\n */\n[data-sba-theme] {\n  --dhue: 0;\n  --dsat: 0%;\n  --link-hue: 206;\n  --shadow-light-color: hsl(49, 96%, 50%, 0.35);\n  --shadow-dark-color: hsl(49, 96%, 50%, 0.7);\n  --highlight-text-color: hsl(0, 0%, 0%);\n}\n\n[data-sba-theme=light] {\n  --highlight-bg-color: #f7db22;\n  --text-color: black;\n  --site-text-color: rgba(0, 0, 0, 0.9);\n  --body-bg-color: white;\n  --modal-bg-color: rgba(255, 255, 255, 0.85);\n  --border-color: #dbdbdb;\n  --area-bg-color: #e6e6e6;\n  --invalid-color: #adadad;\n  --menu-hover-color: whitesmoke;\n  --head-row-bg-color: whitesmoke;\n  --card-color: rgba(247, 219, 34, 0.1);\n  --link-color: hsl(var(--link-hue), 45%, 38%);\n  --link-visited-color: hsl(var(--link-hue), 45%, 53%);\n  --link-hover-color: hsl(var(--link-hue), 45%, 53%);\n  --success-color: #2ca61c;\n}\n\n[data-sba-theme=dark] {\n  --highlight-bg-color: #facd05;\n  --text-color: hsl(var(--dhue), var(--dsat), 85%);\n  --site-text-color: hsl(var(--dhue), var(--dsat), 100%, 0.9);\n  --body-bg-color: hsl(var(--dhue), var(--dsat), 7%);\n  --modal-bg-color: hsl(var(--dhue), var(--dsat), 7%, 0.85);\n  --border-color: hsl(var(--dhue), var(--dsat), 20%);\n  --area-bg-color: hsl(var(--dhue), var(--dsat), 22%);\n  --invalid-color: hsl(var(--dhue), var(--dsat), 50%);\n  --menu-hover-color: hsl(var(--dhue), var(--dsat), 22%);\n  --head-row-bg-color: hsl(var(--dhue), var(--dsat), 13%);\n  --card-color: hsl(var(--dhue), var(--dsat), 22%);\n  --link-color: hsl(var(--link-hue), 90%, 64%);\n  --link-visited-color: hsl(var(--link-hue), 90%, 76%);\n  --link-hover-color: hsl(var(--link-hue), 90%, 76%);\n  --success-color: #64f651;\n}\n\n/**\n *  Spelling Bee Assistant is an add-on for Spelling Bee, the New York Times’ popular word puzzle\n * \n *  Copyright (C) 2020  Dieter Raber\n *  https://www.gnu.org/licenses/gpl-3.0.en.html\n */\nbody {\n  background: var(--body-bg-color);\n  color: var(--text-color);\n}\nbody .pz-game-field {\n  background: var(--body-bg-color);\n  color: var(--text-color);\n}\nbody[data-sba-theme=dark] .pz-game-wrapper, body[data-sba-theme=dark] #js-hook-pz-moment__loading {\n  background: var(--body-bg-color) !important;\n  color: var(--text-color);\n}\nbody .pz-game-wrapper .sb-modal-message a {\n  color: var(--link-color);\n}\nbody .pz-game-wrapper .sb-modal-message a:visited {\n  color: var(--link-visited-color);\n}\nbody .pz-game-wrapper .sb-modal-message a:hover {\n  color: var(--link-hover-color);\n}\nbody .pz-game-wrapper .sb-progress-marker .sb-progress-value,\nbody .pz-game-wrapper .hive-cell:first-child .cell-fill {\n  background: var(--highlight-bg-color);\n  fill: var(--highlight-bg-color);\n  color: var(--highlight-text-color);\n}\nbody .pz-game-wrapper .sba-color-selector .hive .hive-cell .cell-fill,\nbody .pz-game-wrapper .hive-cell .cell-fill {\n  fill: var(--area-bg-color);\n}\nbody[data-sba-theme=dark] .sb-message {\n  background: var(--area-bg-color);\n}\nbody[data-sba-theme=dark] .hive-action__shuffle {\n  position: relative;\n}\nbody[data-sba-theme=dark] .sb-progress-value {\n  font-weight: bold;\n}\nbody[data-sba-theme=dark] .sb-toggle-icon,\nbody[data-sba-theme=dark] .sb-kebob .sb-bob-arrow,\nbody[data-sba-theme=dark] .hive-action__shuffle {\n  background-position: -1000px;\n}\nbody[data-sba-theme=dark] .sb-toggle-icon:after,\nbody[data-sba-theme=dark] .sb-kebob .sb-bob-arrow:after,\nbody[data-sba-theme=dark] .hive-action__shuffle:after {\n  content: "";\n  opacity: 0.85;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  position: absolute;\n  z-index: 0;\n  filter: invert(1);\n  background-image: inherit;\n  background-repeat: inherit;\n  background-position: center;\n  background-size: inherit;\n}\n\n#js-logo-nav rect {\n  fill: var(--body-bg-color);\n}\n#js-logo-nav path {\n  fill: var(--text-color);\n}\n\n.pz-moment__loading {\n  color: black;\n}\n\n.pz-nav__hamburger-inner,\n.pz-nav__hamburger-inner::before,\n.pz-nav__hamburger-inner::after {\n  background-color: var(--text-color);\n}\n\n.pz-nav {\n  width: 100%;\n  background: var(--body-bg-color);\n}\n\n.pz-modal__button.white,\n.pz-footer,\n.pz-moment,\n.sb-modal-scrim {\n  background: var(--modal-bg-color) !important;\n  color: var(--text-color) !important;\n}\n.pz-modal__button.white .pz-moment__button.secondary,\n.pz-footer .pz-moment__button.secondary,\n.pz-moment .pz-moment__button.secondary,\n.sb-modal-scrim .pz-moment__button.secondary {\n  color: white;\n}\n\n.sb-modal-wrapper .sb-modal-frame {\n  border: 1px solid var(--border-color);\n  background: var(--body-bg-color);\n  color: var(--text-color);\n}\n.sb-modal-wrapper .pz-modal__title,\n.sb-modal-wrapper .sb-modal-close {\n  color: var(--text-color);\n}\n\n.pz-moment__close::before, .pz-moment__close::after {\n  background: var(--text-color);\n}\n\n.pz-modal__button.white:hover {\n  background: var(--area-bg-color);\n}\n\n.sb-input-invalid {\n  color: var(--invalid-color);\n}\n\n.sb-toggle-expand {\n  box-shadow: none;\n}\n\n.sb-input-bright,\n.sb-progress-dot.completed::after {\n  color: var(--highlight-bg-color);\n}\n\n.cell-fill {\n  stroke: var(--body-bg-color);\n}\n\n.cell-letter {\n  fill: var(--text-color);\n}\n\n.hive-cell.center .cell-letter {\n  fill: var(--highhlight-text-color);\n}\n\n.hive-action {\n  background-color: var(--body-bg-color);\n  color: var(--text-color);\n}\n.hive-action.push-active {\n  background: var(--menu-hover-color);\n}\n\n[data-sba-theme] .sb-modal-wordlist-items li,\n.sb-wordlist-items-pag > li,\n.pz-ad-box,\n.pz-game-toolbar,\n.pz-spelling-bee-wordlist,\n.hive-action,\n.sb-wordlist-box,\n.sb-message {\n  border-color: var(--border-color);\n}\n\n.sb-toggle-expand {\n  background: var(--body-bg-color);\n}\n\n.sb-progress-line,\n.sb-progress-dot::after,\n.pz-nav::after {\n  background: var(--border-color);\n}\n\n.sb-bob {\n  background-color: var(--border-color);\n}\n.sb-bob.active {\n  background-color: var(--text-color);\n}\n\n/**\n *  Spelling Bee Assistant is an add-on for Spelling Bee, the New York Times’ popular word puzzle\n * \n *  Copyright (C) 2020  Dieter Raber\n *  https://www.gnu.org/licenses/gpl-3.0.en.html\n */\n.sba {\n  background: var(--body-bg-color);\n  border-radius: 6px;\n  border-style: solid;\n  border-width: 1px;\n}\n.sba *:focus {\n  outline: 0;\n}\n.sba ::selection {\n  background: transparent;\n}\n.sba details {\n  font-size: 90%;\n  margin-bottom: 1px;\n}\n.sba summary {\n  font-size: 13px;\n  line-height: 20px;\n  padding: 1px 6px 0 6px;\n  background: var(--area-bg-color);\n  color: var(--text-color);\n  cursor: pointer;\n  position: relative;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  border: 1px solid var(--border-color);\n}\n\n[data-ui].inactive {\n  display: none;\n}\n\n.sba-data-pane {\n  border: 1px solid var(--border-color);\n  width: 100%;\n  font-size: 85%;\n  margin-bottom: 2px;\n  border-collapse: collapse;\n  table-layout: fixed;\n  border-top: none;\n}\n.sba-data-pane[data-cols="3"] :is(th, td) {\n  width: 33.3333333333%;\n}\n.sba-data-pane[data-cols="4"] :is(th, td) {\n  width: 25%;\n}\n.sba-data-pane[data-cols="5"] :is(th, td) {\n  width: 20%;\n}\n.sba-data-pane[data-cols="6"] :is(th, td) {\n  width: 16.6666666667%;\n}\n.sba-data-pane[data-cols="7"] :is(th, td) {\n  width: 14.2857142857%;\n}\n.sba-data-pane[data-cols="8"] :is(th, td) {\n  width: 12.5%;\n}\n.sba-data-pane[data-cols="9"] :is(th, td) {\n  width: 11.1111111111%;\n}\n.sba-data-pane[data-cols="10"] :is(th, td) {\n  width: 10%;\n}\n.sba-data-pane th {\n  text-transform: uppercase;\n  background: var(--head-row-bg-color);\n}\n.sba-data-pane .sba-preeminent {\n  font-weight: bold;\n  border-bottom: 2px solid var(--highlight-bg-color) !important;\n}\n.sba-data-pane .sba-completed td,\n.sba-data-pane td.sba-completed {\n  color: var(--invalid-color);\n  font-weight: normal;\n}\n.sba-data-pane .sba-hidden {\n  display: none;\n}\n.sba-data-pane :is(th, td) {\n  border: 1px solid var(--border-color);\n  border-top: none;\n  white-space: nowrap;\n  text-align: center;\n  padding: 3px 2px;\n}\n.sba-data-pane th {\n  background-color: var(--head-row-bg-color);\n}\n\n[data-ui=community] h4 {\n  font-weight: 700;\n  font-family: nyt-franklin;\n  font-size: 18px;\n  margin: 0 0 1px 0;\n}\n[data-ui=community] p {\n  margin: 0 0 2px 0;\n  font-size: 16px;\n}\n[data-ui=community] em {\n  display: block;\n  font-weight: normal;\n  font-weight: 500;\n  font-size: 14px;\n  font-family: nyt-franklin;\n}\n[data-ui=community] li {\n  margin: 0 0 12px 0;\n}\n[data-ui=community] li ul {\n  padding-left: 20px;\n  list-style: disc;\n}\n[data-ui=community] li ul li {\n  margin: 0;\n}\n[data-ui=community] li ul li a {\n  color: var(--link-color);\n}\n[data-ui=community] li ul li a:hover {\n  color: var(--link-hover-color);\n}\n[data-ui=community] .sb-modal-body {\n  margin-top: 0;\n  padding-bottom: 10px;\n}\n\n[data-ui=yourProgress] b {\n  font-weight: 700;\n}\n[data-ui=yourProgress] .sba-data-pane {\n  margin-left: 5px;\n  max-width: 300px;\n  border: none;\n}\n[data-ui=yourProgress] .sba-data-pane tr.sba-completed td {\n  color: var(--text-color);\n}\n[data-ui=yourProgress] .sba-data-pane tr td {\n  border: none;\n  text-align: left;\n  line-height: 1.8;\n}\n[data-ui=yourProgress] .sba-data-pane tr td:nth-child(n+2) {\n  text-align: right;\n  width: 80px;\n}\n[data-ui=yourProgress] .sba-data-pane tr td:nth-child(2)::after {\n  content: " pts.";\n}\n[data-ui=yourProgress] .sba-data-pane tr td:last-child::after {\n  content: "%";\n}\n\n[data-ui=header] {\n  font-weight: bold;\n  line-height: 32px;\n  flex-grow: 2;\n  text-indent: 1px;\n}\n\n[data-ui=progressBar] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 100%;\n  border-radius: 0;\n  margin: 0;\n  height: 6px;\n  padding: 0;\n  background: transparent;\n  display: block;\n  border: none;\n  border-bottom: 1px var(--border-color) solid;\n}\n[data-ui=progressBar]::-webkit-progress-bar {\n  background-color: transparent;\n}\n[data-ui=progressBar]::-webkit-progress-value {\n  background-color: var(--highlight-bg-color);\n  height: 4px;\n}\n[data-ui=progressBar]::-moz-progress-bar {\n  background-color: var(--highlight-bg-color);\n}\n\n[data-ui=spillTheBeans] {\n  text-align: center;\n  padding: 14px 0;\n  font-size: 38px;\n  margin-top: -24px;\n}\n\n[data-ui=menu] {\n  position: relative;\n  z-index: 1;\n}\n[data-ui=menu] .pane {\n  color: var(--text-color);\n  background: var(--body-bg-color);\n  border: 1px var(--border-color) solid;\n  padding: 5px;\n}\n[data-ui=menu] li {\n  position: relative;\n  line-height: 1.8;\n  white-space: nowrap;\n  cursor: pointer;\n  overflow: hidden;\n  display: block;\n  padding: 5px 9px 5px 28px;\n  font-size: 14px;\n}\n[data-ui=menu] li::before, [data-ui=menu] li::after {\n  position: absolute;\n  display: block;\n}\n[data-ui=menu] li[data-icon=checkmark].checked::after {\n  content: "✔";\n  color: var(--highlight-bg-color);\n  top: 3px;\n  left: 7px;\n  font-size: 16px;\n}\n[data-ui=menu] li[data-icon=warning]::before {\n  content: "";\n  background: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyLjAwNiAyLjI1NWwxMS4yNTUgMTkuNDlILjc1NXoiIGZpbGw9IiNmOGNkMDUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIxLjUiLz48cGF0aCBkPSJNMTMuNDQxIDkuMDAybC0uMzE3IDcuMzA2aC0yLjI0N2wtLjMxNy03LjMwNnptLS4wNDggMTAuMjYyaC0yLjc4NXYtMS44MmgyLjc4NXoiLz48L3N2Zz4=) center center/contain no-repeat;\n  left: 3px;\n  top: 6px;\n  width: 20px;\n  height: 20px;\n}\n[data-ui=menu] li[data-target=darkModeColors], [data-ui=menu] li[data-icon=sba] {\n  border-top: 1px solid var(--border-color);\n}\n[data-ui=menu] li[data-icon=sba] {\n  color: currentColor;\n}\n[data-ui=menu] li[data-icon=sba]::before {\n  content: "";\n  background: url(data:image/webp;base64,UklGRkYCAABXRUJQVlA4WAoAAAAQAAAAFwAAFwAAQUxQSLgAAAABgFpt2/LmVbGJI8u8QgaIZSxqxgEYFTM7VMzMNEBPB2gVcx/xff/7/4UBImIC6F+16CWBxZsmlmH+9a7HROR4BxDmdADArZOOAKCdsyTgOguxkFMokb/oObTDyRBbN/kk+yoitfMAvr/xVevlJa5eoNzKaQN/S6dQC/Eb+PwScCQLQv1crKykJnqiAd5X9y46SrVYJXFQg5CERlSVk2LlF+s1n5iu/geF+14r8Y2x+ompsdqokf4uVlA4IGgBAABwBwCdASoYABgAPpE+m0kloyKhKAqosBIJbAAjwDeRZaSiFfn3Zr1QP9Ud0ADEskPPzxJU2pre8kHbnjqgPRfZb8zq4AD9IaAZD2vQgXhhU4vU6iI9307byI0qRvcdYUVqITfvs+c25tJHp68Tb8QbbjuwTz0j+xXnVHcdq1O53Cem6tFr6zIo8VPHzofJrvlKQnvp1W5bdpH3HE+2rDOikrPkzD5qdR91khmLUr2/65qN81K7n/5Ztjb/URQJxilNBdj/22TMy3S5+24re6Kkfvbzc9n/kNAlBuAaKYxSAgHTAELvJElqGMJ9psshwQ9Hinh1y4MVKzbf8UDf/8aFRjwHnN+c4w1Zb8LpKYQTgVuzyDsB7crn5PhK9sLJaU7CApsBz7CTzw1L6VpU0HoDsNv54wX6rtilmqIwjJzvnBL5H2aH/M7tuhCNyahJ+EDMv/cyE4Kqn918j7n693a1ovztxeo8AAA=) center center/contain no-repeat;\n  left: 5px;\n  top: 6px;\n  width: 20px;\n  height: 20px;\n}\n[data-ui=menu] li[data-icon=sba]:hover {\n  color: var(--link-hover-color);\n  text-decoration: underline;\n}\n\n.sba-color-selector {\n  display: flex;\n  justify-content: space-between;\n  gap: 10px;\n}\n.sba-color-selector svg {\n  width: 120px;\n  height: 120px;\n  display: block;\n}\n\n[data-ui=darkModeColors] .hive {\n  width: auto;\n  padding: 0;\n  flex-grow: 2;\n  display: flex;\n}\n[data-ui=darkModeColors] .hive-cell {\n  position: static;\n  margin: auto;\n  border: 1px solid var(--border-color);\n  padding: 20px;\n  width: 168px;\n  height: 100%;\n  border-radius: 6px;\n}\n[data-ui=darkModeColors] .cell-letter {\n  font-size: 8px;\n  font-weight: 600;\n}\n\n.sba-swatches {\n  display: flex;\n  flex-wrap: wrap;\n  list-style: none;\n  justify-content: space-around;\n  padding: 0;\n  width: 220px;\n}\n.sba-swatches li {\n  position: relative;\n  overflow: hidden;\n  margin-bottom: 5px;\n}\n.sba-swatches label {\n  border: 1px var(--border-color) solid;\n  display: block;\n  width: 50px;\n  height: 50px;\n  overflow: hidden;\n  cursor: pointer;\n}\n.sba-swatches input {\n  position: absolute;\n  left: -100px;\n}\n.sba-swatches input:checked ~ label {\n  border-color: var(--highlight-bg-color);\n}\n\n.sba-googlified .sb-anagram {\n  cursor: pointer;\n}\n.sba-googlified .sb-anagram:hover {\n  text-decoration: underline;\n  color: var(--link-hover-color);\n}\n\n#portal-game-toolbar [role=presentation]::selection {\n  background: transparent;\n}\n\n[data-sba-theme] .sb-modal-wordlist-items li .check.checked {\n  border: none;\n  height: auto;\n  transform: none;\n}\n[data-sba-theme] .sb-modal-wordlist-items li .check.checked::after {\n  position: relative;\n  content: "✔";\n  color: var(--highlight-bg-color);\n  top: 4px;\n  font-size: 16px;\n}\n[data-sba-theme] .sb-modal-header .sb-modal-letters {\n  position: relative;\n  top: -5px;\n}\n\n.pz-toolbar-button:hover,\n[data-ui=menu] li:hover {\n  background: var(--menu-hover-color);\n  color: var(--text-color);\n}\n.pz-toolbar-button::selection,\n[data-ui=menu] li::selection {\n  background-color: transparent;\n}\n\n[data-ui=grid] table {\n  border-top: 1px solid var(--border-color);\n}\n[data-ui=grid] tbody tr:last-child td {\n  font-weight: bold;\n}\n[data-ui=grid] tbody tr td {\n  padding: 5px 0 !important;\n}\n[data-ui=grid] tbody tr td:last-of-type {\n  font-weight: bold;\n}\n\n.pz-desktop .sba details[open] summary:before {\n  transform: rotate(-90deg);\n  left: 10px;\n  top: 1px;\n}\n.pz-desktop .sba summary {\n  list-style: none;\n  padding: 1px 15px 0 21px;\n}\n.pz-desktop .sba summary::marker {\n  display: none;\n}\n.pz-desktop .sba summary:before {\n  content: "❯";\n  font-size: 9px;\n  position: absolute;\n  display: inline-block;\n  transform: rotate(90deg);\n  transform-origin: center;\n  left: 7px;\n  top: 0;\n}\n\n[data-sba-theme] :is(.sb-wordlist-items-pag, .sb-modal-wordlist-items) > li.sba-pangram {\n  font-weight: 700;\n  border-bottom: 2px var(--highlight-bg-color) solid;\n}\n[data-sba-theme] .sba-pop-up.sb-modal-frame .sb-modal-content .sba-modal-footer {\n  text-align: right;\n  font-size: 13px;\n  border-top: 1px solid var(--border-color);\n  padding: 10px 10px 0 10px;\n}\n\n.sb-modal-frame .sb-modal-content::after {\n  background: linear-gradient(180deg, transparent 0%, var(--modal-bg-color) 56.65%, var(--body-bg-color) 100%);\n}\n\n/**\n *  Spelling Bee Assistant is an add-on for Spelling Bee, the New York Times’ popular word puzzle\n * \n *  Copyright (C) 2020  Dieter Raber\n *  https://www.gnu.org/licenses/gpl-3.0.en.html\n */\n[data-sba-active=true] {\n  --sba-game-offset: 12px;\n  --sba-app-width: 100px;\n  --sba-app-padding: 0;\n  --sba-app-margin: 0;\n  --sba-mobile-threshold: 900px;\n  --sba-game-base-width: 1280px;\n  --sba-game-width: calc(var(--sba-game-base-width) - (2 * var(--sba-game-offset)));\n}\n[data-sba-active=true][data-sba-sidebar=true] {\n  --sba-game-base-width: 1450px;\n}\n\n.sba-container {\n  display: none;\n}\n\n[data-ui=sidebar] .sb-modal-title,\n[data-ui=sidebar] .sba-modal-footer {\n  display: none;\n}\n[data-ui=sidebar] .sb-modal-header,\n[data-ui=sidebar] .sb-modal-body {\n  padding: 0 var(--sba-game-offset) !important;\n}\n\n.sba {\n  box-sizing: border-box;\n}\n.sba[data-ui=sbaApp] {\n  width: var(--sba-app-width);\n  margin: var(--sba-app-margin);\n  padding: var(--sba-app-padding);\n}\n.sba[data-ui=sidebar] {\n  margin: var(--sba-game-offset);\n  width: 400px;\n}\n.sba *,\n.sba *:before,\n.sba *:after {\n  box-sizing: border-box;\n}\n\n[data-ui=menu] .pane {\n  position: absolute;\n  top: 0;\n  right: -10000px;\n}\n\n[data-sba-submenu=true] [data-ui=sbaApp] {\n  position: relative;\n  left: -167px;\n  top: -175px;\n}\n[data-sba-submenu=true] .pz-game-toolbar {\n  position: relative;\n  z-index: 4;\n}\n[data-sba-submenu=true] [data-ui=menu] .pane {\n  right: -16px;\n  top: 49px;\n}\n[data-sba-submenu=true] [data-ui=sbaApp] {\n  left: -163px;\n  top: 0;\n}\n[data-sba-submenu=true].pz-desktop .pane {\n  right: -16px;\n  top: 55px;\n}\n\n[data-sba-active=true] .sba-container {\n  display: block;\n  position: absolute;\n  top: 50%;\n  transform: translate(0, -50%);\n  right: var(--sba-game-offset);\n  z-index: 1;\n}\n[data-sba-active=true] .sba {\n  border-color: transparent;\n}\n[data-sba-active=true] [data-ui=header] {\n  display: none;\n}\n[data-sba-active=true][data-sba-submenu=true] .sba-container {\n  top: 0;\n  height: 0;\n}\n[data-sba-active=true] .sb-expanded .sba-container {\n  visibility: hidden;\n  pointer-events: none;\n}\n[data-sba-active=true] .sb-content-box {\n  max-width: var(--sba-game-width);\n  justify-content: space-between;\n  position: relative;\n}\n[data-sba-active=true] .sb-controls-box {\n  max-width: calc(100vw - var(--sba-app-width));\n}\n\n@media (max-width: 370px) {\n  [data-sba-active=true] .sb-hive {\n    width: 70%;\n  }\n  [data-sba-active=true].pz-spelling-bee-wordlist .hive-action:not(.hive-action__shuffle) {\n    font-size: 0.9em;\n    margin: 0 4px 8px;\n    padding: 23px 0;\n  }\n  [data-sba-active=true] .hive-action:not(.hive-action__shuffle) {\n    width: 71px;\n    min-width: auto;\n  }\n}\n[data-sba-active] .pz-game-toolbar .pz-row {\n  padding: 0;\n}\n\n@media (min-width: 516px) {\n  [data-sba-active] .pz-game-toolbar .pz-row {\n    padding: 0 12px;\n  }\n  [data-sba-active].pz-desktop [data-ui=sbaApp] {\n    left: -175px;\n  }\n\n  [data-ui=score] .sba-data-pane tbody th {\n    text-transform: none;\n    width: 31%;\n  }\n  [data-ui=score] .sba-data-pane tbody td {\n    width: 23%;\n  }\n  [data-ui=score] .sba-data-pane tbody tr:nth-child(1) th::after {\n    content: "ords";\n  }\n  [data-ui=score] .sba-data-pane tbody tr:nth-child(2) th::after {\n    content: "oints";\n  }\n  [data-ui=score] .sba-data-pane thead th {\n    width: 23%;\n  }\n  [data-ui=score] .sba-data-pane thead th:first-of-type {\n    width: 31%;\n  }\n\n  [data-sba-active=true] {\n    --sba-app-width: 138px;\n    --sba-app-padding: 0 5px 5px;\n  }\n  [data-sba-active=true] .sba {\n    border-color: var(--border-color);\n  }\n  [data-sba-active=true] [data-ui=header] {\n    display: block;\n  }\n}\n@media (min-width: 900px) {\n  [data-sba-submenu=true].pz-desktop [data-ui=menu] .pane {\n    right: 0;\n    top: 55px;\n  }\n\n  [data-sba-active=true] {\n    --sba-app-width: 160px;\n    --sba-app-padding: 0 8px 8px;\n    --sba-app-margin: 66px 0 0 0;\n  }\n  [data-sba-active=true] .sb-content-box {\n    padding: 0 var(--sba-game-offset);\n  }\n  [data-sba-active=true] .sb-controls-box {\n    max-width: none;\n  }\n  [data-sba-active=true] .sba-container {\n    position: static;\n    transform: none;\n  }\n  [data-sba-active=true] .sb-expanded .sba-container {\n    z-index: 1;\n  }\n  [data-sba-active=true][data-sba-submenu=true] [data-ui=sbaApp] {\n    top: -66px;\n  }\n  [data-sba-active=true].pz-desktop [data-ui=sbaApp] {\n    left: -191px;\n  }\n}\n@media (min-width: 1298px) {\n  [data-sba-active=true][data-sba-submenu=true] [data-ui=sbaApp] {\n    left: -179px;\n  }\n}\n@media (min-width: 768px) {\n  [data-sba-theme].pz-page .sba-pop-up.sb-modal-frame .sb-modal-content .sb-modal-body {\n    padding-right: 56px;\n  }\n  [data-sba-theme].pz-page .sba-pop-up.sb-modal-frame .sb-modal-content .sb-modal-header {\n    padding-right: 56px;\n  }\n  [data-sba-theme].pz-page .sba-pop-up.sb-modal-frame .sb-modal-content .sba-modal-footer {\n    text-align: right;\n    border-top: 1px solid var(--border-color);\n    padding-top: 10px;\n    width: calc(100% - 112px);\n    margin: -8px auto 15px;\n  }\n}'}),t.on(d("destroy"),(()=>this.ui.remove())),this.add()}}class H extends x{getTarget(){return this.app.envIs("mobile")?n.$("#js-mobile-toolbar"):n.$("#portal-game-toolbar > div:last-of-type")}getComponent(t){return t.dataset.component===this.app.key?this.app:this.app.plugins.has(t.dataset.component)?this.app.plugins.get(t.dataset.component):null}constructor(t){super(t,"Menu",""),this.target=this.getTarget();const e=["pz-toolbar-button__sba",this.app.envIs("mobile")?"pz-nav__toolbar-item":"pz-toolbar-button"];this.app.domSet("submenu",!1);const a=n.ul({classNames:["pane"],data:{ui:"submenu"},events:{pointerup:t=>{const e=t.target.closest("li");if(!e||0!==t.button)return!1;const n=this.getComponent(e);switch(e.dataset.action){case"boolean":{let t=!n.getState();n.toggle(t),e.classList.toggle("checked",t),n===this.app&&this.app.toggle(t);break}case"panel":this.app.domSet("submenu",!1);const t=this.app.domGet("sidebar")?"sidebar":"popup";n.display(this.app.plugins.get(t));break;default:setTimeout((()=>{this.app.domSet("submenu",!1)}),60)}}},content:n.li({classNames:this.app.getState()?["checked"]:[],attributes:{title:this.app.title},data:{component:this.app.key,icon:"checkmark",action:"boolean"},content:`Show ${o("title")}`})});this.ui=n.div({events:{pointerup:t=>{t.target.dataset.action||this.app.domSet("submenu",!this.app.domGet("submenu"))}},content:[o("title"),a],attributes:{role:"presentation"},classNames:e}),document.addEventListener("keyup",(t=>{!0===this.app.domGet("submenu")&&/^(Ent|Esc|Key|Dig)/.test(t.code)&&this.app.domSet("submenu",!1)})),n.$("#pz-game-root").addEventListener("pointerdown",(()=>{!0===this.app.domGet("submenu")&&this.app.domSet("submenu",!1)})),t.on(d("pluginsReady"),(t=>{t.detail.forEach(((t,e)=>{if(!t.canChangeState||t===this)return!1;const s=t.menuAction||"boolean";a.append(n.li({classNames:"boolean"===s&&t.getState()?["checked"]:[],attributes:{title:t.description},data:{component:e,icon:"boolean"===s?"checkmark":t.menuIcon||null,action:s},content:t.title}))})),a.append(n.li({attributes:{title:o("label")+" Website"},data:{icon:d(),component:d("web"),action:"link"},content:n.a({content:o("label"),attributes:{href:o("url"),target:d()}})}))})),t.on(d("destroy"),(()=>this.ui.remove()))}}class U extends A{display(t){return this.panel.setContent("subtitle",this.description).setContent("body",this.getPane()),t.display(this.panel),this}run(t){super.run(t);const e=n.$$("tr",this.pane),a=e.length;return e.forEach(((t,e)=>{if(a===e-1)return!1;const s=n.$$("td",t),o=s.length;s.forEach(((t,e)=>{const n=t.textContent.trim().split("/");e<o-1&&2===n.length&&n[0]===n[1]&&t.classList.add(d("completed","d"))}))})),this}getData(){const t=g("foundTerms"),e=g("answers"),n=Array.from(new Set(e.map((t=>t.charAt(0))))).concat(["∑"]),a=Array.from(new Set(e.map((t=>t.length)))).concat(["∑"]);a.sort(((t,e)=>t-e)),n.sort();const s=[[""].concat(n)];let o=Object.fromEntries(n.map((t=>[t,{fnd:0,all:0}]))),r=Object.fromEntries(a.map((t=>[t,JSON.parse(JSON.stringify(o))])));e.forEach((e=>{const n=e.charAt(0),a=e.length;r[a][n].all++,r[a]["∑"].all++,r["∑"][n].all++,r["∑"]["∑"].all++,t.includes(e)&&(r[a][n].fnd++,r[a]["∑"].fnd++,r["∑"][n].fnd++,r["∑"]["∑"].fnd++)}));for(let[t,e]of Object.entries(r)){const n=[t];Object.values(e).forEach((t=>{n.push(t.all>0?`${t.fnd}/${t.all}`:"-")})),s.push(n)}return s}constructor(t){super(t,"Grid","The number of words by length and by first letter."),this.panel=new S(this.app,this.key).setContent("title",this.title),this.menuAction="panel",this.menuIcon="null"}}class O extends x{display(t){this.panel=t;const e=n.$(`[data-panel="${t.key}"]`);return e.append(t.ui),e.dispatchEvent(new Event("toggle")),this}add(){return!(screen.width<this.targetMinWidth)&&(this.app.domSet("sidebar",this.getState()),super.add())}toggle(t){return this.app.domSet("sidebar",t),super.toggle(t)}constructor(t){super(t,"Sidebar","Uses sidebar instead of modals",{canChangeState:!0,addMethod:"prepend"}),this.targetMinWidth=1450,this.ui=n.div({classNames:[d(),d("sidebar","d")]}),this.target=this.app.target;const e=t=>{t.target.open&&n.$$("details",this.ui).forEach((e=>{e.isSameNode(t.target)||(e.open=!1)}))};t.on(d("pluginsReady"),(t=>{t.detail.forEach((t=>{if(!t.canChangeState||t===this)return!1;t.menuAction&&"panel"===t.menuAction&&this.ui.append(n.details({data:{panel:t.key},events:{toggle:t=>e(t)},content:[n.summary({content:t.title})]}))}))})),this.toggle(this.getState())}}class R extends x{enableKeyClose(){return document.addEventListener("keyup",(t=>{this.app.popupCloser=this.getCloseButton(),this.app.popupCloser&&"Escape"===t.code&&this.app.popupCloser.click(),delete this.app.popupCloser})),this}buildUi(){return this.panelHolder=n.div({classNames:[d("panel-holder","d")]}),n.div({classNames:["sb-modal-frame",d("pop-up","d")],attributes:{role:"button"},events:{click:t=>{t.stopPropagation()}},content:[n.div({classNames:["sb-modal-top"],content:n.div({attributes:{role:"button"},classNames:["sb-modal-close"],content:"×",events:{click:()=>{this.toggle(!1)}}})}),this.panelHolder]})}display(t){return this.panel=t,this.panelHolder.append(t.ui),this.toggle(!0),this}getCloseButton(){for(let t of[".pz-moment__frame.on-stage .pz-moment__close",".sb-modal-close"]){const e=n.$(t,this.app.gameWrapper);if(e)return e}return!1}toggle(t){const e=this.getCloseButton();return!t&&e&&e.click(),t?(this.app.modalWrapper.append(this.ui),this.modalSystem.classList.add("sb-modal-open")):(this.target.append(this.ui),this.panel.reset(),this.modalSystem.classList.remove("sb-modal-open")),this}constructor(t){super(t,"popup"),this.state=!1,this.modalSystem=this.app.modalWrapper.closest(".sb-modal-system"),this.target=this.app.componentContainer,this.ui=this.buildUi(),this.enableKeyClose()}}new class extends w{domSet(t,e){return document.body.dataset[d(t)]=e,this}domUnset(t){return delete document.body.dataset[d(t)],this}domGet(t){return void 0!==document.body.dataset[d(t)]&&JSON.parse(document.body.dataset[d(t)])}getSyncData(){let t=localStorage.getItem("sb-today");return t?(t=JSON.parse(t),t.words||[]):[]}envIs(t){return document.body.classList.contains("pz-"+t)}buildComponentContainer(){this.componentContainer=n.template({data:{ui:d("component-container","d")}}),document.body.append(this.componentContainer)}load(){n.waitFor(".sb-wordlist-items-pag",this.gameWrapper).then((t=>{this.observer=this.buildObserver(),b(this,this.getSyncData()),this.modalWrapper=n.$(".sb-modal-wrapper",this.gameWrapper),this.resultList=t,this.target=n.$(".sb-content-box",this.gameWrapper),this.buildComponentContainer(),this.add(),this.domSet("active",!0),this.registerPlugins(),this.trigger(d("refreshUi")),document.dispatchEvent(new Event(d("ready"))),this.envIs("desktop")&&window.scrollTo(0,472)}))}getState(){return this.domGet("active")}toggle(t){return this.domSet("active",t),this}buildObserver(){const t=new MutationObserver((t=>{t.forEach((t=>{if(!(t.target instanceof HTMLElement))return!1;switch(!0){case"childList"===t.type&&t.target.isSameNode(this.modalWrapper):n.$(".sb-modal-frame.yesterday",t.target)&&this.trigger(d("yesterday"),t.target);break;case"childList"===t.type&&t.target.classList.contains("sb-hive-input-content"):this.trigger(d("newInput"),t.target.textContent.trim());break;case"childList"===t.type&&t.target.isSameNode(this.resultList)&&!!t.addedNodes.length&&!!t.addedNodes[0].textContent.trim()&&t.addedNodes[0]instanceof HTMLElement:this.trigger(d("newWord"),t.addedNodes[0].textContent.trim())}}))})),e={target:this.gameWrapper,options:{childList:!0,subtree:!0,attributes:!0}};return t.observe(e.target,e.options),t}buildUi(){const t={};t[d("destroy")]=()=>{this.observer.disconnect(),this.container.remove(),this.domUnset("theme")};const e=[o("prefix")];return n.div({data:{ui:this.key,version:o("version")},classNames:e,events:t})}registerPlugins(){return this.plugins=new Map,Object.values({Header:z,Score:L,LetterCount:T,FirstLetter:E,Pangrams:M,ProgressBar:N,SpillTheBeans:P,DarkMode:k,PangramHl:_,Googlify:$,Styles:I,Menu:H,Grid:U,YourProgress:B,Community:D,ColorConfig:C,SideBar:O,Popup:R,TodaysAnswers:j}).forEach((t=>{const e=new t(this);e.add(),this.plugins.set(e.key,e)})),this.trigger(d("pluginsReady"),this.plugins),this}add(){this.target.prepend(this.container)}constructor(t){super(o("label"),{canChangeState:!0,key:d("app")});const e=n.$(`[data-ui="${this.key}"]`);e&&e.dispatchEvent(new Event(d("destroy"))),this.gameWrapper=t,this.container=n.div({classNames:[d("container","d")]}),this.ui=this.buildUi(),this.container.append(this.ui),this.load()}}(n.$("#js-hook-game-wrapper"))}();